From 72f8a26c94e6ea8eae58601f1ecab54d834f1ff9 Mon Sep 17 00:00:00 2001
From: Dmitry Smagin <exmortis@yandex.ru>
Date: Sun, 8 May 2016 17:56:08 +0300
Subject: [PATCH] mipsrec: Optimize more emitMFC2()

---
 src/recompiler/mips/rec_gte.cpp.h | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/recompiler/mips/rec_gte.cpp.h b/src/recompiler/mips/rec_gte.cpp.h
index e33e2f47..7a461428 100644
--- a/src/recompiler/mips/rec_gte.cpp.h
+++ b/src/recompiler/mips/rec_gte.cpp.h
@@ -79,12 +79,10 @@ static void emitMFC2(u32 rt, u32 reg)
 		EXT(rt, rt, 7, 5);
 		LW(TEMP_1, PERM_REG_1, off(CP2D.r[10])); // gteIR2
 		EXT(TEMP_1, TEMP_1, 7, 5);
-		SLL(TEMP_1, TEMP_1, 5);
-		OR(rt, rt, TEMP_1);
+		INS(rt, TEMP_1, 5, 5);
 		LW(TEMP_1, PERM_REG_1, off(CP2D.r[11])); // gteIR3
 		EXT(TEMP_1, TEMP_1, 7, 5);
-		SLL(TEMP_1, TEMP_1, 10);
-		OR(rt, rt, TEMP_1);
+		INS(rt, TEMP_1, 10, 5);
 		SW(rt, PERM_REG_1, off(CP2D.r[29]));
 	} else {
 		LW(rt, PERM_REG_1, off(CP2D.r[reg]));
