From 4e2050e6a530eb1f9a1e89e077b7bd4f499f90de Mon Sep 17 00:00:00 2001
From: lindahl <lindahl>
Date: Tue, 24 Oct 2000 13:57:01 +0000
Subject: [PATCH] Reversed the inlining option - now the gmxcode is inlined
 unless we explicitly turn it off.

---
 src/gmxlib/mkinl.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/gmxlib/mkinl.c b/src/gmxlib/mkinl.c
index 5f5359656e..66dfd2ff9b 100644
--- a/src/gmxlib/mkinl.c
+++ b/src/gmxlib/mkinl.c
@@ -99,9 +99,11 @@ static char *SRCID_mkinl_c = "$Id$";
  *
  * INNERLOOP OPTIMIZATION OPTIONS:  
  * 
- * -DINLINE_GMXCODE    This inlines the gromacs inverse square root 
+ * -DDONT_INLINE_GMXCODE
+ *                     Turns off inlining of the gromacs inverse square root 
  *                     and/or reciprocal on architectures which use
- *                     it, saving some calling time in the inner loops.  
+ *                     it, which comes handy for debugging. It is
+ *                     probably slightly slower, though.
  *
  * -DPREFETCH_F        Prefetching of forces. The two extra options 
  * -DPREFETCH_F_W      additionally does it for single water and 
@@ -303,7 +305,7 @@ int main(int argc,char *argv[])
   arch.gmx_recip = FALSE;
 #endif
     
-#if ((defined GMX_INVSQRT || defined GMX_RECIP) && defined INLINE_GMXCODE)
+#if ((defined GMX_INVSQRT || defined GMX_RECIP) && !defined DONT_INLINE_GMXCODE)
   opt.inline_gmxcode = TRUE;
   fprintf(stderr,">>> Inlining gromacs invsqrt and/or reciprocal code\n");
 #else
