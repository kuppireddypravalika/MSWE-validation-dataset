From e2d772129efa5d8cc1b8d9fa9f93524aedb741ed Mon Sep 17 00:00:00 2001
From: Pilow <pierre.laupretre@gmail.com>
Date: Tue, 5 May 2020 21:49:11 +0200
Subject: [PATCH] [compiler] Don't create label if not necessary

---
 src/compiler/Compiler.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/compiler/Compiler.cpp b/src/compiler/Compiler.cpp
index c7aba4b1..db412302 100644
--- a/src/compiler/Compiler.cpp
+++ b/src/compiler/Compiler.cpp
@@ -1794,7 +1794,7 @@ Compiler::label Compiler::insn_init_label(std::string name) {
 void Compiler::insn_if(Compiler::value condition, std::function<void()> then, std::function<void()> elze) {
 	assert(condition.t->llvm(*this) == condition.v->getType());
 	auto label_then = insn_init_label("then");
-	auto label_else = insn_init_label("else");
+	auto label_else = elze ? insn_init_label("else") : Compiler::label {};
 	auto label_end = insn_init_label("ifcont");
 	insn_if_new(insn_to_bool(condition), &label_then, elze ? &label_else : &label_end);
 	insn_label(&label_then);
