From 4f927cea18bee1216e6aa95259160f374d21d1bc Mon Sep 17 00:00:00 2001
From: Jordan Moxon <jem497@cornell.edu>
Date: Sat, 9 Jan 2021 10:41:18 -0800
Subject: [PATCH] Slightly loosen approx for gcc-10 optimizations

---
 tests/Unit/NumericalAlgorithms/Spectral/Test_Spectral.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/tests/Unit/NumericalAlgorithms/Spectral/Test_Spectral.cpp b/tests/Unit/NumericalAlgorithms/Spectral/Test_Spectral.cpp
index 5e792a4022b2..a179f82e562b 100644
--- a/tests/Unit/NumericalAlgorithms/Spectral/Test_Spectral.cpp
+++ b/tests/Unit/NumericalAlgorithms/Spectral/Test_Spectral.cpp
@@ -144,7 +144,8 @@ void test_weak_differentiation() {
         const auto analytic_derivative =
             unit_polynomial_derivative(p, collocation_pts);
         for (size_t i = 1; i < n - 1; ++i) {
-          CHECK(numeric_derivative[i] == approx(-analytic_derivative[i]));
+          Approx local_approx = Approx::custom().epsilon(1e-12).scale(1.);
+          CHECK(local_approx(numeric_derivative[i]) == -analytic_derivative[i]);
         }
       }
     }
