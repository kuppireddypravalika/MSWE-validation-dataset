From 341d983734adaff8ebe1e5d583de78237226704a Mon Sep 17 00:00:00 2001
From: James Yonan <james@openvpn.net>
Date: Sun, 25 Feb 2018 23:25:54 -0700
Subject: [PATCH] JsonClient/AppServer: full HTTP compression support

* gzip or lz4 supported for standard HTTP.

* lz4 support for websocket.

Signed-off-by: James Yonan <james@openvpn.net>
---
 openvpn/common/complog.hpp | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)
 create mode 100644 openvpn/common/complog.hpp

diff --git a/openvpn/common/complog.hpp b/openvpn/common/complog.hpp
new file mode 100644
index 000000000..30fcd2149
--- /dev/null
+++ b/openvpn/common/complog.hpp
@@ -0,0 +1,16 @@
+//  OpenVPN
+//
+//  Copyright (C) 2012-2017 OpenVPN Technologies, Inc.
+//  All rights reserved.
+
+#pragma once
+
+namespace openvpn {
+  inline void log_compress(const std::string prefix, const size_t orig_size, const size_t new_size)
+  {
+    OPENVPN_LOG(prefix
+		<< ' ' << orig_size
+		<< " -> " << new_size
+		<< " -- compression ratio: " << double(orig_size) / double(new_size));
+  }
+}
