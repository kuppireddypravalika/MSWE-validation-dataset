From 19f211d40ede33f36c161765ccd81d55201cf2a0 Mon Sep 17 00:00:00 2001
From: NotCompsky <adammarkgray@gmail.com>
Date: Fri, 18 Oct 2019 15:08:16 +0100
Subject: [PATCH] Performance:  Reduce buffer size.

---
 media/src/tag-manager/primaryitem.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/media/src/tag-manager/primaryitem.cpp b/media/src/tag-manager/primaryitem.cpp
index 467e0a2b..0139fb8a 100644
--- a/media/src/tag-manager/primaryitem.cpp
+++ b/media/src/tag-manager/primaryitem.cpp
@@ -81,7 +81,7 @@ void NameItem::setData(const QVariant& value,  const int role){
 	delete tagcompleter;
 	tagcompleter = new QCompleter(tagslist);
     
-	static char buf[4096]; // Though tag name should not be longer than 128 characters
+	static char buf[21 + 2*128 + 11 + 19]; // Though tag name should not be longer than 128 characters
     compsky::mysql::exec(_mysql::obj, buf, "UPDATE tag SET name=\"",  _f::esc,  '"',  neue,  "\" WHERE id=",  this->tag_id);
     
     QStandardItem::setData(value, role);
