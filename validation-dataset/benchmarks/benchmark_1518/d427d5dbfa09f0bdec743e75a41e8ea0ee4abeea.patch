From d427d5dbfa09f0bdec743e75a41e8ea0ee4abeea Mon Sep 17 00:00:00 2001
From: Nat Goodspeed <nat@lindenlab.com>
Date: Wed, 15 Nov 2023 10:12:12 -0500
Subject: [PATCH] SL-20546: Use narrow() explicit conversion from F64 to F32.

---
 indra/llcommon/llrand.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/indra/llcommon/llrand.cpp b/indra/llcommon/llrand.cpp
index 20e25177f05..702d6b34c99 100644
--- a/indra/llcommon/llrand.cpp
+++ b/indra/llcommon/llrand.cpp
@@ -93,7 +93,7 @@ inline F32 ll_internal_random<F32>()
 	// Per Monty, it's important to clamp using the correct fmodf() rather
 	// than expanding to F64 for fmod() and then truncating back to F32. Prior
 	// to this change, we were getting sporadic ll_frand() == 1.0 results.
-	F32 rv{ ll_internal_random_unclamped() };
+	F32 rv{ narrow(ll_internal_random_unclamped()) };
 	if(!((rv >= 0.0) && (rv < 1.0))) return fmodf(rv, 1.0f);
 	return rv;
 }
