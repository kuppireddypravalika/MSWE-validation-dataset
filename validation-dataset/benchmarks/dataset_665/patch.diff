From ed1d0b328c8b3285df2ec27cfc1943313177bedd Mon Sep 17 00:00:00 2001
From: Tobias Junghans <tobydox@veyon.io>
Date: Fri, 19 Oct 2018 12:31:17 +0200
Subject: [PATCH] Master: RecursiveFilterProxyModel: cache row count

No need to call rowCount() on every loop iteration.
---
 master/src/RecursiveFilterProxyModel.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/master/src/RecursiveFilterProxyModel.cpp b/master/src/RecursiveFilterProxyModel.cpp
index 333b09c84..e7d8ead0d 100644
--- a/master/src/RecursiveFilterProxyModel.cpp
+++ b/master/src/RecursiveFilterProxyModel.cpp
@@ -46,8 +46,9 @@ bool RecursiveFilterProxyModel::filterAcceptsRow( int sourceRow, const QModelInd
 	}
 
 	const auto rowIndex = sourceModel()->index( sourceRow, 0, sourceParent );
+	const auto rowCount = sourceModel()->rowCount( rowIndex );
 
-	for( int i = 0; i < sourceModel()->rowCount( rowIndex ); ++i )
+	for( int i = 0; i < rowCount; ++i )
 	{
 		if( filterAcceptsRow( i, rowIndex ) )
 		{
