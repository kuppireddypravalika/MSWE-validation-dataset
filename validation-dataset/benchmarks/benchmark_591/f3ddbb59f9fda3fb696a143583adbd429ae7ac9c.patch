From f3ddbb59f9fda3fb696a143583adbd429ae7ac9c Mon Sep 17 00:00:00 2001
From: ppalkar <ppalkar.iitb@gmail.com>
Date: Thu, 12 Sep 2019 10:51:43 +0530
Subject: [PATCH] Adding a solve status for CplexLPEngine etc.

Now capturing solve status 5 (OptimalInfeas) from CplexLPEngine and
considering it infeasible. Also, turning on use of dual simplex
algorithm only when atleast one engine call has been made.
---
 src/engines/Cplex/CplexLPEngine.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/engines/Cplex/CplexLPEngine.cpp b/src/engines/Cplex/CplexLPEngine.cpp
index 3459dfc99..6e95cb853 100644
--- a/src/engines/Cplex/CplexLPEngine.cpp
+++ b/src/engines/Cplex/CplexLPEngine.cpp
@@ -701,7 +701,7 @@ EngineStatus CplexLPEngine::solve()
 #endif
 
   /* Optimize the problem and obtain solution. */
-  if (bndChanged_ || consChanged_) {
+  if ((bndChanged_ || consChanged_) && (stats_->calls > 1)) {
     /* Because the problem is dual feasible with the rows added, using
       the dual simplex method is indicated.  */
     cpxstatus_ = CPXXsetintparam (cpxenv_, CPXPARAM_LPMethod, CPX_ALG_DUAL);
@@ -748,7 +748,7 @@ EngineStatus CplexLPEngine::solve()
     ws_->setVarStat(varstat, cur_numcols);
     ws_->setNumCons(cur_numrows);
     ws_->setConStat(constat, cur_numrows);
-  } else if (solstat == 3) {
+  } else if (solstat == 3 || solstat == 5) {
     status_ = ProvenInfeasible;
     sol_->setObjValue(INFINITY);
     sol_->setDualOfCons(dualOfCons);
