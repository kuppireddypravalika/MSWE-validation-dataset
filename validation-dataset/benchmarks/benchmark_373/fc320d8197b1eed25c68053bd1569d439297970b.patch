From fc320d8197b1eed25c68053bd1569d439297970b Mon Sep 17 00:00:00 2001
From: LADSsoft <touchstone222@runbox.com>
Date: Mon, 7 Feb 2022 16:17:52 -0500
Subject: [PATCH] use _mm_pause() instead of asm pause

---
 src/clibs/cpp/complib/staticguard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/clibs/cpp/complib/staticguard.c b/src/clibs/cpp/complib/staticguard.c
index e43e8528a..ac56faf04 100644
--- a/src/clibs/cpp/complib/staticguard.c
+++ b/src/clibs/cpp/complib/staticguard.c
@@ -49,7 +49,7 @@ bool _RTL_FUNC __static_guard(DWORD* mem)
     {
         while (atomic_load(mem) != -1)
         {
-            asm pause;
+            _mm_pause();
         }     
         return false;   
     }
