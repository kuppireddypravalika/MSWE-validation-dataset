From 4c63750d9a592f7757e7d55cc4f3d39fbeb1df03 Mon Sep 17 00:00:00 2001
From: "bernard.parisse" <bernard.parisse@23ce0884-8a58-47d3-bc5c-ddf1cd5b9f9e>
Date: Thu, 11 Jul 2019 15:40:38 +0000
Subject: [PATCH] [giac] sparse multivariate gcd optimization

git-svn-id: https://dev.geogebra.org/svn/trunk/geogebra/giac@69179 23ce0884-8a58-47d3-bc5c-ddf1cd5b9f9e
---
 src/giac/cpp/modpoly.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/giac/cpp/modpoly.cc b/src/giac/cpp/modpoly.cc
index e4526f44..48b74734 100644
--- a/src/giac/cpp/modpoly.cc
+++ b/src/giac/cpp/modpoly.cc
@@ -3740,7 +3740,7 @@ namespace giac {
 		return false;
 	      polynome pD,QP(dim),QQ(dim),R(dim);
 	      convert_back_xn(trygcd,pD);
-	      if (divremmod(p,pD,modulo,QP,R) && R.coord.empty()){
+	      if (pD.coord.size()<=p.coord.size() && pD.coord.size()<=q.coord.size() && divremmod(p,pD,modulo,QP,R) && R.coord.empty()){
 		if (divremmod(q,pD,modulo,QQ,R) && R.coord.empty()){
 		  pD=pD*cont;
 		  d=smod(pD*invmod(pD.coord.front().value,modulo),modulo);
