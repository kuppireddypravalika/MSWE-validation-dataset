From d0bb3047f03e3471b965917c2d8527bdd1a72b08 Mon Sep 17 00:00:00 2001
From: "Michael Cook (mackal)" <mcook@mackal.net>
Date: Sun, 4 Sep 2016 20:59:39 -0400
Subject: [PATCH] Let's fix the fear pathing flags right away after
 SE_ImmuneFleeing

This speeds up the response to spells like Call of Challenge
Before it would fix the flags the next tick, which makes the spell
mostly useless
---
 zone/bonuses.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/zone/bonuses.cpp b/zone/bonuses.cpp
index 2a8a0c790e..1a49aaf662 100644
--- a/zone/bonuses.cpp
+++ b/zone/bonuses.cpp
@@ -2529,6 +2529,8 @@ void Mob::ApplySpellsBonuses(uint16 spell_id, uint8 casterlevel, StatBonuses *ne
 
 			case SE_ImmuneFleeing:
 				new_bonus->ImmuneToFlee = true;
+				if (currently_fleeing) // lets update shit now instead of next tick
+					ProcessFlee();
 				break;
 
 			case SE_DelayDeath:
