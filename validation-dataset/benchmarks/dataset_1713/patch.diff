From 9fb5ff56c35177502791f1e979b2eca1881a70e5 Mon Sep 17 00:00:00 2001
From: Alex Trotsenko <alex1973tr@gmail.com>
Date: Fri, 29 Jan 2016 11:46:09 +0200
Subject: [PATCH] Micro-optimize QIODevice::write()

Remove redundant checks.

Change-Id: I766fc08d0d7e48bf7dc2371309f6644c37c3b68b
Reviewed-by: Oswald Buddenhagen <oswald.buddenhagen@theqtcompany.com>
---
 src/corelib/io/qiodevice.cpp | 11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)

diff --git a/src/corelib/io/qiodevice.cpp b/src/corelib/io/qiodevice.cpp
index 85b7fd8aaee7..fd204b00debc 100644
--- a/src/corelib/io/qiodevice.cpp
+++ b/src/corelib/io/qiodevice.cpp
@@ -1657,13 +1657,10 @@ qint64 QIODevice::write(const char *data, qint64 maxSize)
 #endif
 
     qint64 written = writeData(data, maxSize);
-    if (written > 0) {
-        if (!sequential) {
-            d->pos += written;
-            d->devicePos += written;
-        }
-        if (!d->buffer.isEmpty() && !sequential)
-            d->buffer.skip(written);
+    if (!sequential && written > 0) {
+        d->pos += written;
+        d->devicePos += written;
+        d->buffer.skip(written);
     }
     return written;
 }
