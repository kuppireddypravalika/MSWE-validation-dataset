From 8298bce3eab2dc2d96e0cd30b68d9f556a2bd3d8 Mon Sep 17 00:00:00 2001
From: Sven Woop <sven.woop@intel.com>
Date: Mon, 21 Jul 2014 10:23:31 +0200
Subject: [PATCH] enabling bvh8 only on AVX2 machines

---
 kernels/common/scene.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/kernels/common/scene.cpp b/kernels/common/scene.cpp
index c7fb03146..97b71d6f7 100644
--- a/kernels/common/scene.cpp
+++ b/kernels/common/scene.cpp
@@ -117,7 +117,7 @@ namespace embree
         switch (mode) {
         case /*0b00*/ 0: 
 #if defined (__TARGET_AVX__)
-          if (has_feature(AVX)) 
+          if (has_feature(AVX2)) // on AVX machines BVH8 gives lower performance, only enable on AVX2!
 	  {
             if (isHighQuality()) accels.add(BVH8::BVH8Triangle8SpatialSplit(this)); 
             else                 accels.add(BVH8::BVH8Triangle8ObjectSplit(this)); 
