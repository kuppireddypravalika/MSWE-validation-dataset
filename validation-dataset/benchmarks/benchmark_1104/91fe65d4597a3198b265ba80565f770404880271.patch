From 91fe65d4597a3198b265ba80565f770404880271 Mon Sep 17 00:00:00 2001
From: RParedesPalacios <rparedes@dsic.upv.es>
Date: Mon, 20 Jan 2020 14:14:19 +0100
Subject: [PATCH] improving cnn cpu omp

---
 src/hardware/cpu/nn/cpu_conv.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/hardware/cpu/nn/cpu_conv.cpp b/src/hardware/cpu/nn/cpu_conv.cpp
index 150200cbf..6bc46ab83 100644
--- a/src/hardware/cpu/nn/cpu_conv.cpp
+++ b/src/hardware/cpu/nn/cpu_conv.cpp
@@ -126,7 +126,7 @@ void cpu_conv2D_grad(ConvolDescriptor *D)
   // Map memory to Eigen
   new(&D->matgK) Eigen::Map<Eigen::MatrixXf>(D->gK->ptr, D->kr * D->kc * D->kz, D->nk);
 
-  #pragma omp parallel for
+  //#pragma omp parallel for
   for(int b=0;b<D->I->shape[0];b++){
 
     float *ptrD=D->D->ptr+(b*osize);
@@ -140,7 +140,7 @@ void cpu_conv2D_grad(ConvolDescriptor *D)
 
   //bias
 
-  #pragma omp parallel for 
+  //#pragma omp parallel for 
   for(int b=0;b<D->D->shape[0];b++) {
     float *ptrD=D->D->ptr+(b*osize);
     for(int z=0;z<D->D->shape[1];z++)
