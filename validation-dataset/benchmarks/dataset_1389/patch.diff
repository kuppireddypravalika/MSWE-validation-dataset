From 821adfacd0ac80db247ae6f438d29c75783f04a0 Mon Sep 17 00:00:00 2001
From: dridri <dridri85@gmail.com>
Date: Wed, 12 Jul 2017 13:57:54 +0200
Subject: [PATCH] Increase internal buffers size of VideoEncode/VideoDecode

---
 src/Component.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/Component.cpp b/src/Component.cpp
index b988cbf..6350b41 100644
--- a/src/Component.cpp
+++ b/src/Component.cpp
@@ -634,7 +634,7 @@ OMX_ERRORTYPE Component::AllocateBuffers( OMX_BUFFERHEADERTYPE** buffer, int por
 
 	uint32_t size = portdef.nBufferSize;
 	if ( dynamic_cast<VideoEncode*>(this) != nullptr or dynamic_cast<VideoDecode*>(this) != nullptr ) {
-		size *= 2; // Buffer can be too small in low-light=>high luminosity transition
+		size *= 4; // Buffer can be too small in low-light=>high luminosity transition
 	}
 
 	for ( i = 0; i < portdef.nBufferCountActual; i++ ) {
