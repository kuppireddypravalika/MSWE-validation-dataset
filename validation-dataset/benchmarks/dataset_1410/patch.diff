From 784752a6d9cf9df1cea218c3afa404b437cb8acb Mon Sep 17 00:00:00 2001
From: Ethan Burns <burns.ethan@gmail.com>
Date: Mon, 30 Jul 2012 12:55:04 -0400
Subject: [PATCH] Better tie-breaking in speediest.

---
 search/speediest.hpp | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/search/speediest.hpp b/search/speediest.hpp
index 0e69f756..58f25a06 100644
--- a/search/speediest.hpp
+++ b/search/speediest.hpp
@@ -13,7 +13,14 @@ template <class D> struct Speediest : public SearchAlgorithm<D> {
 		double sortval;
 		unsigned int depth;
 
-		static bool pred(Node *a, Node *b) { return a->sortval < b->sortval; }
+		static bool pred(Node *a, Node *b) {
+			if (a->sortval == b->sortval) {
+				if (a->d == b->d)
+					return a->g > b->g;
+				return a->d < b->d;
+			}
+			return a->sortval < b->sortval;
+		}
 
 		static typename D::Cost prio(Node *n) { return n->sortval; }
 
