From d1de0a04dda1e1838709904d6278360925941380 Mon Sep 17 00:00:00 2001
From: Dobiasd <editgym@gmail.com>
Date: Thu, 9 Nov 2017 13:07:33 +0000
Subject: [PATCH] use fplus::round in tensor3_to_bytes

---
 include/fdeep/tensor3.hpp | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/include/fdeep/tensor3.hpp b/include/fdeep/tensor3.hpp
index 67d9585b..138d61cd 100644
--- a/include/fdeep/tensor3.hpp
+++ b/include/fdeep/tensor3.hpp
@@ -392,9 +392,8 @@ inline void tensor3_to_bytes(const tensor3& t, std::uint8_t* value_ptr,
     const auto bytes = fplus::transform(
         [low, high](internal::float_type v) -> std::uint8_t
     {
-        return static_cast<std::uint8_t>(
-            fplus::clamp<internal::float_type>(0, 255,
-                fplus::reference_interval(0.0f, 255.0f, low, high, v)));
+        return fplus::round<internal::float_type, std::uint8_t>(
+            fplus::reference_interval(0.0f, 255.0f, low, high, v));
     }, *values);
     for (std::size_t i = 0; i < values->size(); ++i)
     {
