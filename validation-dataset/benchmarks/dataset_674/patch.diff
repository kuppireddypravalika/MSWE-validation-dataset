From bf98cbf1c5d394bfef912f0934a0dafe2ec7edd3 Mon Sep 17 00:00:00 2001
From: Erik Garrison <erik.garrison@gmail.com>
Date: Sun, 1 Feb 2015 17:20:20 +0000
Subject: [PATCH] lower kmer buffer size

---
 vg_set.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/vg_set.cpp b/vg_set.cpp
index 9fe7976c049..d96777e4a9e 100644
--- a/vg_set.cpp
+++ b/vg_set.cpp
@@ -82,7 +82,8 @@ void VGset::index_kmers(Index& index, int kmer_size, int edge_max, int stride) {
             buffer.emplace_back();
             written_buffer_count.push_back(0);
         }
-        uint64_t buffer_max_size = 1024 * 1024 * 128;
+        // how many kmer entries to hold onto
+        uint64_t buffer_max_size = 1000000;
 
         auto write_buffer = [&written_buffer_count](int tid, vector<KmerMatch>& buf) {
             stringstream file_name;
