From a29dbd2dcc04c8d07dd9e1e49b4e54debbc23996 Mon Sep 17 00:00:00 2001
From: Dan Gohman <gohman@apple.com>
Date: Mon, 26 Jul 2010 17:34:05 +0000
Subject: [PATCH] Use DominatorTree::properlyDominates instead of dominates
 with an explicit inequality check.

git-svn-id: https://llvm.org/svn/llvm-project/llvm/trunk@109398 91177308-0d34-0410-b5e6-96231b3b80d8
---
 lib/Analysis/RegionInfo.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/Analysis/RegionInfo.cpp b/lib/Analysis/RegionInfo.cpp
index eb1ea88b6e4..71e3e554cf1 100644
--- a/lib/Analysis/RegionInfo.cpp
+++ b/lib/Analysis/RegionInfo.cpp
@@ -356,7 +356,7 @@ bool RegionInfo::isRegion(BasicBlock *entry, BasicBlock *exit) const {
   // Do not allow edges pointing into the region.
   for (DST::iterator SI = exitSuccs->begin(), SE = exitSuccs->end();
        SI != SE; ++SI)
-    if (DT->dominates(entry, *SI) && *SI != entry && *SI != exit)
+    if (DT->properlyDominates(entry, *SI) && *SI != exit)
       return false;
 
 
