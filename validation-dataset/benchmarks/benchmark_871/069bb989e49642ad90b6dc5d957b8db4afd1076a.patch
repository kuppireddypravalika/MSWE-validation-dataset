From 069bb989e49642ad90b6dc5d957b8db4afd1076a Mon Sep 17 00:00:00 2001
From: Brian Gaeke <gaeke@uiuc.edu>
Date: Wed, 29 Sep 2004 03:27:30 +0000
Subject: [PATCH] Use FpMOVD pseudo-instruction to move doubles around.

llvm-svn: 16575
---
 llvm/lib/Target/SparcV8/SparcV8RegisterInfo.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/llvm/lib/Target/SparcV8/SparcV8RegisterInfo.cpp b/llvm/lib/Target/SparcV8/SparcV8RegisterInfo.cpp
index efd851f36f2..9b3c68b8fe7 100644
--- a/llvm/lib/Target/SparcV8/SparcV8RegisterInfo.cpp
+++ b/llvm/lib/Target/SparcV8/SparcV8RegisterInfo.cpp
@@ -68,6 +68,8 @@ void SparcV8RegisterInfo::copyRegToReg(MachineBasicBlock &MBB,
     BuildMI (MBB, I, V8::ORrr, 2, DestReg).addReg (V8::G0).addReg (SrcReg);
   else if (RC == SparcV8::FPRegsRegisterClass)
     BuildMI (MBB, I, V8::FMOVS, 1, DestReg).addReg (SrcReg);
+  else if (RC == SparcV8::DFPRegsRegisterClass)
+    BuildMI (MBB, I, V8::FpMOVD, 1, DestReg).addReg (SrcReg);
   else
     assert (0 && "Can't copy this register");
 }
