From 6c150182fddf5c1fe7b5aa3720552eba1578a151 Mon Sep 17 00:00:00 2001
From: Simon Hong <shong@igalia.com>
Date: Wed, 6 Jun 2018 11:33:56 +0900
Subject: [PATCH] Don't initialize RenderFrameData when connection to renderer
 is closed

---
 .../browser/brave_shields_web_contents_observer.cc             | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/components/brave_shields/browser/brave_shields_web_contents_observer.cc b/components/brave_shields/browser/brave_shields_web_contents_observer.cc
index 7b42035ea..4fa449f4c 100644
--- a/components/brave_shields/browser/brave_shields_web_contents_observer.cc
+++ b/components/brave_shields/browser/brave_shields_web_contents_observer.cc
@@ -100,6 +100,9 @@ BraveShieldsWebContentsObserver::BraveShieldsWebContentsObserver(
 
 void BraveShieldsWebContentsObserver::RenderFrameCreated(
     RenderFrameHost* rfh) {
+  if (!rfh->IsRenderFrameLive())
+    return;
+
   // Look up the extension API frame ID to force the mapping to be cached.
   // This is needed so that cached information is available for tabId in the
   // filtering callbacks.
