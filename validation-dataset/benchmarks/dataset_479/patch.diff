From e991c128dcdcf2c257092b54b0988be16625dbc5 Mon Sep 17 00:00:00 2001
From: ZehMatt <m.moninger.h@gmail.com>
Date: Thu, 22 Jul 2021 20:25:38 +0300
Subject: [PATCH] Use EnumMap for format token lookups

---
 src/openrct2/localisation/FormatCodes.cpp | 16 +++++++---------
 1 file changed, 7 insertions(+), 9 deletions(-)

diff --git a/src/openrct2/localisation/FormatCodes.cpp b/src/openrct2/localisation/FormatCodes.cpp
index 204afcaa113d..2b5c4085203d 100644
--- a/src/openrct2/localisation/FormatCodes.cpp
+++ b/src/openrct2/localisation/FormatCodes.cpp
@@ -9,13 +9,14 @@
 
 #include "FormatCodes.h"
 
+#include "../core/EnumMap.hpp"
+
 #include <mutex>
 #include <string>
-#include <unordered_map>
 #include <vector>
 
 // clang-format off
-static const std::unordered_map<std::string_view, FormatToken> FormatTokenMap = {
+static const EnumMap<FormatToken> FormatTokenMap = {
     { "MOVE_X",               FormatToken::Move,                },
     { "NEWLINE",              FormatToken::Newline,             },
     { "NEWLINE_SMALLER",      FormatToken::NewlineSmall,        },
@@ -97,13 +98,10 @@ std::string_view FormatTokenToString(FormatToken token, bool withBraces)
     }
     else
     {
-        for (const auto& t : FormatTokenMap)
-        {
-            if (t.second == token)
-            {
-                return t.first;
-            }
-        }
+        auto it = FormatTokenMap.find(token);
+        if (it != FormatTokenMap.end())
+            return it->first;
+
         return {};
     }
 }
