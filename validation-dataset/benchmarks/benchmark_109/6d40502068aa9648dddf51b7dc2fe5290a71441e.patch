From 6d40502068aa9648dddf51b7dc2fe5290a71441e Mon Sep 17 00:00:00 2001
From: Bartosz Taudul <bartosz.taudul@game-lion.com>
Date: Tue, 3 Apr 2018 13:23:53 +0200
Subject: [PATCH] Execute direct write to memory, if only one byte.

---
 server/TracyView.cpp | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/server/TracyView.cpp b/server/TracyView.cpp
index cde1a73b3b..076fbb3a85 100644
--- a/server/TracyView.cpp
+++ b/server/TracyView.cpp
@@ -4065,8 +4065,15 @@ Vector<Vector<int8_t>> View::GetMemoryPages() const
             const auto b0 = a0 & PageChunkMask;
             const auto b1 = a1 & PageChunkMask;
             const auto c0 = b0 >> ChunkBits;
-            const auto c1 = ( b1 >> ChunkBits ) + 1;
-            memset( page.data() + c0, val, c1 - c0 );
+            const auto c1 = b1 >> ChunkBits;
+            if( c0 == c1 )
+            {
+                *( page.data() + c0 ) = val;
+            }
+            else
+            {
+                memset( page.data() + c0, val, c1 - c0 + 1 );
+            }
         }
         else
         {
