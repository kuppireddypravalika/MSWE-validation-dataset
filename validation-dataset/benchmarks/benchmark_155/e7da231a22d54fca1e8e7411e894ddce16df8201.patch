From e7da231a22d54fca1e8e7411e894ddce16df8201 Mon Sep 17 00:00:00 2001
From: Andreas Buykx <a.buykx@dianafea.com>
Date: Wed, 12 Sep 2018 20:39:37 +0200
Subject: [PATCH] Using vtkNew instead of raw pointers

---
 Filters/Geometry/vtkGeometryFilter.cxx | 18 +++++-------------
 1 file changed, 5 insertions(+), 13 deletions(-)

diff --git a/Filters/Geometry/vtkGeometryFilter.cxx b/Filters/Geometry/vtkGeometryFilter.cxx
index 3902ac3a39e..81687894694 100644
--- a/Filters/Geometry/vtkGeometryFilter.cxx
+++ b/Filters/Geometry/vtkGeometryFilter.cxx
@@ -35,6 +35,7 @@
 #include "vtkVoxel.h"
 #include "vtkWedge.h"
 #include "vtkIncrementalPointLocator.h"
+#include "vtkNew.h"
 
 
 vtkStandardNewMacro(vtkGeometryFilter);
@@ -718,10 +719,10 @@ void vtkGeometryFilter::UnstructuredGridExecute(vtkDataSet *dataSetInput,
   }//if not all visible
 
   // Used for nonlinear cells only
-  vtkGenericCell *cell = vtkGenericCell::New();
-  vtkIdList *ipts = vtkIdList::New();
-  vtkPoints *coords = vtkPoints::New();
-  vtkIdList *icellIds = vtkIdList::New();;
+  vtkNew<vtkGenericCell> cell;
+  vtkNew<vtkIdList> ipts;
+  vtkNew<vtkPoints> coords;
+  vtkNew<vtkIdList> icellIds;
 
   // These store the cell ids of the input that map to the
   // new vert/line/poly/strip cells, for copying cell data
@@ -1061,15 +1062,6 @@ void vtkGeometryFilter::UnstructuredGridExecute(vtkDataSet *dataSetInput,
     } //if visible
   } //for all cells
 
-  icellIds->Delete();
-  icellIds = nullptr;
-  coords->Delete();
-  coords = nullptr;
-  ipts->Delete();
-  ipts = nullptr;
-  cell->Delete();
-  cell = nullptr;
-
   // Update ourselves and release memory
   //
   output->SetVerts(verts);
