From 5c5b8115e70fabc34086e441975f5da350c5c791 Mon Sep 17 00:00:00 2001
From: David Korth <gerbilsoft@gerbilsoft.com>
Date: Tue, 25 Oct 2016 22:05:49 -0400
Subject: [PATCH] [libromdata] DMG: Don't use memcpy() for the entry point.

Use a manual byteswap instead.
---
 src/libromdata/DMG.cpp | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/libromdata/DMG.cpp b/src/libromdata/DMG.cpp
index 67d9d82245..bc127176ba 100644
--- a/src/libromdata/DMG.cpp
+++ b/src/libromdata/DMG.cpp
@@ -590,9 +590,7 @@ int DMG::loadFieldData(void)
 	// Entry Point
 	if(romHeader->entry[0] == 0 && romHeader->entry[1] == 0xC3){
 		// this is the "standard" way of doing the entry point
-		uint16_t entry_address;
-		memcpy((void*)&entry_address,(void*)(romHeader->entry+2),sizeof(uint16_t)); //ugly hack, but avoids aliasing warnings
-		entry_address = le16_to_cpu(entry_address);
+		const uint16_t entry_address = (romHeader->entry[2] | (romHeader->entry[3] << 8));
 		m_fields->addData_string_numeric(entry_address, RomFields::FB_HEX, 4);
 	}
 	else{
