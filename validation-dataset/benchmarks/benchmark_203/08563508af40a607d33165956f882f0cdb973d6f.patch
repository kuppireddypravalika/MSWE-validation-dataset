From 08563508af40a607d33165956f882f0cdb973d6f Mon Sep 17 00:00:00 2001
From: Andre Masella <andre@masella.name>
Date: Tue, 24 Jan 2017 21:48:49 -0500
Subject: [PATCH] Fixed memory leak in PCRE destructors

---
 compiler/pcre.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/compiler/pcre.cpp b/compiler/pcre.cpp
index 17504c5..38835a7 100644
--- a/compiler/pcre.cpp
+++ b/compiler/pcre.cpp
@@ -70,7 +70,7 @@ static bamql::RegularExpression createPCRE(
         "merge",
         state.getGenerator().destructor()->GetInsertBlock()->getParent());
     state.getGenerator().destructor()->CreateCondBr(
-        was_initialised, free_block, merge_block);
+        was_initialised, merge_block, free_block);
     state.getGenerator().destructor()->SetInsertPoint(free_block);
     llvm::Value *free_args[] = { dtor_loaded };
     state.getGenerator().destructor()->CreateCall(free_func, free_args);
