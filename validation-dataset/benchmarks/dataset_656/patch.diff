From 3e0a96f5d392206f025e95fb74cab59086de023a Mon Sep 17 00:00:00 2001
From: Tobias Doerffel <tobias.doerffel@gmail.com>
Date: Wed, 11 Dec 2013 23:31:55 +0100
Subject: [PATCH] ItalcVncServer: initialize structure using memset()

Instead of initializing all pointers in the rfbProtocolExtension struct
manually use memset - guards us against future changes to the structure
as well.
---
 ica/src/ItalcVncServer.cpp | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

diff --git a/ica/src/ItalcVncServer.cpp b/ica/src/ItalcVncServer.cpp
index 73e0ee748..b28e4b660 100644
--- a/ica/src/ItalcVncServer.cpp
+++ b/ica/src/ItalcVncServer.cpp
@@ -274,15 +274,14 @@ static void runX11vnc( QStringList cmdline, int port, bool plainVnc )
 	{
 		// register iTALC protocol extension
 		static rfbProtocolExtension pe;
+
+		// initialize all pointers inside the struct to NULL
+		memset( &pe, 0, sizeof( pe ) );
+
+		// register our own handlers
 		pe.newClient = italcCoreNewClient;
-		pe.init = NULL;
-		pe.enablePseudoEncoding = NULL;
-		pe.pseudoEncodings = NULL;
 		pe.handleMessage = lvs_italcHandleMessage;
-		pe.close = NULL;
-		pe.usage = NULL;
-		pe.processArgument = NULL;
-		pe.next = NULL;
+
 		rfbRegisterProtocolExtension( &pe );
 	}
 
