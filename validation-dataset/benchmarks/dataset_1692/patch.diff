From f067e9783f9c9348b048e784b948c3a965fabbcf Mon Sep 17 00:00:00 2001
From: Huangzizhou <zizhou@nyu.edu>
Date: Wed, 27 Jul 2022 10:17:47 -0400
Subject: [PATCH] two options for optimizing towards markers

---
 src/polyfem/main_trajectory_opt.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/polyfem/main_trajectory_opt.cpp b/src/polyfem/main_trajectory_opt.cpp
index 6b890de72e..187d51d626 100644
--- a/src/polyfem/main_trajectory_opt.cpp
+++ b/src/polyfem/main_trajectory_opt.cpp
@@ -424,7 +424,7 @@ int main(int argc, char **argv)
 	}
 	else if (target_type == "marker-data")
 	{
-		const std::string scene = "Unit-Cell"; // "Cube"
+		const std::string scene = state.args["optimization"]["name"];
 		auto &f = *dynamic_cast<NodeTrajectoryFunctional *>(func.get());
 		std::ifstream infile(target_path);
 		std::vector<Eigen::VectorXd> markers;
@@ -471,7 +471,7 @@ int main(int argc, char **argv)
 		assert(targets.rows() == V.rows());
 		for (int s = 0; s < marker_rest_position.size(); s++)
 		{
-			if (scene == "Unit-Cell")
+			if (scene != "Unit-Cell")
 				if (s == 3) // wrong data
 					continue;
 			double min_dist = std::numeric_limits<double>::max();
