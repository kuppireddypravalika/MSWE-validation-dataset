From e652f63cf8f1ee286f056deda6ef86362bc1ae52 Mon Sep 17 00:00:00 2001
From: Ravishankar Sundararaman <shankar.progs2@gmail.com>
Date: Thu, 10 Apr 2014 23:56:36 +0000
Subject: [PATCH] Updated LCAO minimize to use L-BFGS with a large history
 (since it is only in the space of subspace rotations and memory is not an
 issue)

---
 jdftx/electronic/ElecVars_LCAO.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/jdftx/electronic/ElecVars_LCAO.cpp b/jdftx/electronic/ElecVars_LCAO.cpp
index 234be84da..fd8ad5c03 100644
--- a/jdftx/electronic/ElecVars_LCAO.cpp
+++ b/jdftx/electronic/ElecVars_LCAO.cpp
@@ -248,6 +248,9 @@ int ElecVars::LCAO()
 	mp.linePrefix = "LCAOMinimize: ";
 	mp.energyLabel = "F";
 	mp.energyDiffThreshold = lcaoTol;
+	mp.dirUpdateScheme = MinimizeParams::LBFGS;
+	mp.history = 10;
+	mp.alphaTincreaseFactor = 10;
 	mp.nIterations = (lcaoIter>=0) ? lcaoIter : ( eInfo.subspaceRotation ? 30 : 3 );
 	if(e->cntrl.fixed_H) { C = Y; Hsub = lcao.B; } //bypass subspace iteration
 	else lcao.minimize(mp);
