From 639a6ed339033fe2984104610cd184f9ebf5d24d Mon Sep 17 00:00:00 2001
From: Philipp Kraus <philipp.kraus@flashpixx.de>
Date: Mon, 4 Oct 2010 19:38:47 +0000
Subject: [PATCH] ng parallel quantization error

---
 clustering/nonsupervised/neuralgas.hpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/clustering/nonsupervised/neuralgas.hpp b/clustering/nonsupervised/neuralgas.hpp
index 96720f1..b1455fa 100644
--- a/clustering/nonsupervised/neuralgas.hpp
+++ b/clustering/nonsupervised/neuralgas.hpp
@@ -603,6 +603,9 @@ namespace machinelearning { namespace clustering { namespace nonsupervised {
         // we get every quantization error in 0.5 * sum-over-local-datapoints,
         // so we must for full sum multiplicate with 2
         std::vector<T> l_error = l_gatherError[0];
+        for(std::size_t i=0; i < l_error.size(); ++i)
+            l_error[i] *= 2.0;
+        
         for(std::size_t i=1; i < l_gatherError.size(); ++i)
             for(std::size_t n=0; n < l_error.size(); ++n)
                 l_error[n] += 2.0*l_gatherError[i][n];
