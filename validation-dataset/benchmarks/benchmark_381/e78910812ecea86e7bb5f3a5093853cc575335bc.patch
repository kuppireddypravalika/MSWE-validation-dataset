From e78910812ecea86e7bb5f3a5093853cc575335bc Mon Sep 17 00:00:00 2001
From: Alexandros Frantzis <alexandros.frantzis@canonical.com>
Date: Wed, 9 Apr 2014 20:36:11 +0300
Subject: [PATCH] compositor: Use a signed scalar time representation to avoid
 infinite sleeps with sleep_until()

See http://gcc.gnu.org/bugzilla/show_bug.cgi?id=58038
---
 src/server/compositor/multi_threaded_compositor.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/server/compositor/multi_threaded_compositor.cpp b/src/server/compositor/multi_threaded_compositor.cpp
index e231d309882..b6f236924b6 100644
--- a/src/server/compositor/multi_threaded_compositor.cpp
+++ b/src/server/compositor/multi_threaded_compositor.cpp
@@ -190,7 +190,7 @@ class BufferConsumingFunctor : public CompositingFunctor
     void wait_until_next_vsync()
     {
         using namespace std::chrono;
-        typedef duration<uint64_t, std::ratio<1, 60>> vsync_periods;
+        typedef duration<int64_t, std::ratio<1, 60>> vsync_periods;
 
         /* Truncate to vsync periods */
         auto const previous_vsync =
