From 9d9cceb8cd8cd49206c6556a2d0e8bd6ff7e97c0 Mon Sep 17 00:00:00 2001
From: klaussfreire <klaussfreire@9476613a-4e0a-0410-bcee-947800e9c4d1>
Date: Mon, 26 Dec 2011 04:44:53 +0000
Subject: [PATCH] Do not draw super-tiny meshes (less than 2.5 pixels squared).
 This was set at 0.5, but since it's computed based on the bounding disc, and
 it usually is bigger than the mesh itself, 0.5 was overly conservative. 2.5
 gives better empirical results.

---
 src/cmd/unit.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/cmd/unit.cpp b/src/cmd/unit.cpp
index 8fbfbc2d06..69d679922a 100644
--- a/src/cmd/unit.cpp
+++ b/src/cmd/unit.cpp
@@ -473,7 +473,7 @@ void GameUnit< UnitType >::Draw( const Transformation &parent, const Matrix &par
                     double pixradius = this->meshdata[i]->rSize()*perspectiveFactor(
                         (rd < g_game.znear) ? g_game.znear : rd );
                     double lod = pixradius*g_game.detaillevel;
-                    if (lod >= 0.5 && pixradius >= 0.5) {
+                    if (lod >= 0.5 && pixradius >= 2.5) {
                         //if the radius is at least half a pixel at detail 1 (equivalent to pixradius >= 0.5 / detail)
                         float currentFrame = this->meshdata[i]->getCurrentFrame();
                         this->meshdata[i]->Draw( lod, this->WarpMatrix( *ctm ), d, 
