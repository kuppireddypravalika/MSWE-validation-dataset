From e1db612863d9f7ee5e8ed1d146222381ab1988b7 Mon Sep 17 00:00:00 2001
From: GliGli <gligli@sfxteam.org>
Date: Mon, 27 Feb 2012 19:24:10 +0100
Subject: [PATCH] removing profiling code, speedup

---
 nullDC/dc/sh4/sh4_interpreter.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/nullDC/dc/sh4/sh4_interpreter.cpp b/nullDC/dc/sh4/sh4_interpreter.cpp
index 751ea23..7c32a93 100644
--- a/nullDC/dc/sh4/sh4_interpreter.cpp
+++ b/nullDC/dc/sh4/sh4_interpreter.cpp
@@ -680,12 +680,16 @@ u64 time_update_system=0;
 
 void FASTCALL spgUpdatePvr(u32 cycles); // quicker to use direct plugin call
 
+//#define PROF_UPDATESYSTEM
+
 extern "C" {
 //448 Cycles
 //as of 7/2/2k8 this is fixed to 448 cycles
 int __attribute__((externally_visible)) __fastcall UpdateSystem()
 {		
+#ifdef PROF_UPDATESYSTEM	
 	u64 ust=mftb();
+#endif
 	
 	UpdateTMU(448);
 	spgUpdatePvr(448);
@@ -697,8 +701,10 @@ int __attribute__((externally_visible)) __fastcall UpdateSystem()
 
 	int rv=UpdateINTC();
 	
+#ifdef PROF_UPDATESYSTEM	
 	ust=mftb()-ust;
 	time_update_system+=ust;
+#endif
 	
 	return rv;
 }
