From d360e3dcb608bd96d674bbae597b7938334972fd Mon Sep 17 00:00:00 2001
From: Fabian Vogt <fabian@ritter-vogt.de>
Date: Wed, 16 Sep 2020 14:35:26 +0200
Subject: [PATCH] krdb: Call xrdb with -nocpp

Avoids the C preprocessor: fewer dependencies, less overhead.
---
 kcms/krdb/krdb.cpp | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/kcms/krdb/krdb.cpp b/kcms/krdb/krdb.cpp
index 59ba546c435..c47e0353b1a 100644
--- a/kcms/krdb/krdb.cpp
+++ b/kcms/krdb/krdb.cpp
@@ -493,11 +493,11 @@ void runRdb( uint flags )
   tmpFile.flush();
 
   KProcess proc;
-#ifndef NDEBUG
-  proc << QStringLiteral("xrdb") << QStringLiteral("-merge") << tmpFile.fileName();
-#else
-  proc << "xrdb" << "-quiet" << "-merge" << tmpFile.fileName();
+  proc << QStringLiteral("xrdb") << QStringLiteral("-nocpp")
+#ifdef NDEBUG
+    << QStringLiteral("-quiet")
 #endif
+    << QStringLiteral("-merge") << tmpFile.fileName();
   proc.execute();
 
   applyGtkStyles(exportColors, 1);
