From 4129d46e68ba569b94c6870e0e774c5c0617dda1 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Gregor=20Dai=C3=9F?= <Gregor.Daiss+git@gmail.com>
Date: Tue, 21 Apr 2020 00:30:51 +0200
Subject: [PATCH] Replaced 1to8 avx instruction for non-MIC builds

---
 .../OperationMultiEvalStreaming_multImpl.cpp                  | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/datadriven/src/sgpp/datadriven/operation/hash/OperationMultiEvalStreaming/OperationMultiEvalStreaming_multImpl.cpp b/datadriven/src/sgpp/datadriven/operation/hash/OperationMultiEvalStreaming/OperationMultiEvalStreaming_multImpl.cpp
index 7fafd43d4f..6e7b2cca5d 100644
--- a/datadriven/src/sgpp/datadriven/operation/hash/OperationMultiEvalStreaming/OperationMultiEvalStreaming_multImpl.cpp
+++ b/datadriven/src/sgpp/datadriven/operation/hash/OperationMultiEvalStreaming/OperationMultiEvalStreaming_multImpl.cpp
@@ -409,7 +409,11 @@ void OperationMultiEvalStreaming::multImpl(
         eval_11 = _mm512_castsi512_pd(_mm512_and_epi64(abs2Mask, _mm512_castpd_si512(eval_11)));
 #endif
 
+#if defined(__MIC__)
         __m512d one = _mm512_set_1to8_pd(1.0);
+#else
+        __m512d one = _mm512_set1_pd(1.0);
+#endif
 
         eval_0 = _mm512_sub_pd(one, eval_0);
         eval_1 = _mm512_sub_pd(one, eval_1);
