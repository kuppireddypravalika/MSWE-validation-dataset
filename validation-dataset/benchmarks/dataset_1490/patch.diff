From 550d4b6c319a61d7f54fa439af319ed698b7a900 Mon Sep 17 00:00:00 2001
From: "bernard.parisse" <bernard.parisse@23ce0884-8a58-47d3-bc5c-ddf1cd5b9f9e>
Date: Sat, 28 Jan 2017 10:18:10 +0000
Subject: [PATCH] [giac] speedup for Gosper algorithm with parameters

git-svn-id: https://dev.geogebra.org/svn/trunk/geogebra/giac@51603 23ce0884-8a58-47d3-bc5c-ddf1cd5b9f9e
---
 src/giac/cpp/intg.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/giac/cpp/intg.cc b/src/giac/cpp/intg.cc
index d467c8a3..a6ab13c1 100644
--- a/src/giac/cpp/intg.cc
+++ b/src/giac/cpp/intg.cc
@@ -4264,7 +4264,7 @@ namespace giac {
   // then try gcd(A(x),B(x+t))
   vecteur decalage(const polynome & A,const polynome & B){
     int s=A.dim;
-    //if (s==1)
+    if (s==1)
       return decalage_(A,B);
     vecteur l(s),L(s);
     for (int i=0;i<s;++i)
@@ -4299,7 +4299,7 @@ namespace giac {
     vecteur res;
     for (int i=0;i<v.size();++i){
       gen ti=v[i];
-      gen bti=subst(b,t,ti,false,context0);
+      gen bti=subst(b,l[0],l[0]+ti,false,context0);
       gen g=gcd(a,bti,context0);
       if (!is_zero(derive(g,l[0],context0)))
 	res.push_back(ti);
