From 3e8d62458e9f034b74b55c8c7c52c63f22b23e82 Mon Sep 17 00:00:00 2001
From: Jonathan Behrens <fintelia@gmail.com>
Date: Thu, 30 Apr 2020 13:01:52 -0400
Subject: [PATCH] Use std::move for constructing page_info_ref

---
 kernel/vm.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/kernel/vm.cc b/kernel/vm.cc
index 04a463e28..df8307d00 100644
--- a/kernel/vm.cc
+++ b/kernel/vm.cc
@@ -765,7 +765,7 @@ vmap::ensure_page(const vmap::vpf_array::iterator &it, vmap::access_type type,
       page = page_info_ref(page_info::of(p));
     } else {
       u64 page_idx = (it.index() * PGSIZE - desc.start) / PGSIZE;
-      page = page_info_ref(desc.inode->get_page_info(page_idx));
+      page = page_info_ref(std::move(desc.inode->get_page_info(page_idx)));
       if (!page)
         return 0;
     }
