From be0a0272732a49ebc853dbc3d245642738e85ec1 Mon Sep 17 00:00:00 2001
From: Sven Eckelmann <sven@narfation.org>
Date: Sat, 9 Feb 2013 01:22:35 +0100
Subject: [PATCH] Use generic _mm_loadu_ps instead of GCC specific
 __builtin_ia32_loadups

---
 src/Glide64/3dmath.cpp | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/Glide64/3dmath.cpp b/src/Glide64/3dmath.cpp
index 8fa098dfa5..dd732e8c08 100644
--- a/src/Glide64/3dmath.cpp
+++ b/src/Glide64/3dmath.cpp
@@ -217,14 +217,14 @@ void MulMatricesSSE(float m1[4][4],float m2[4][4],float r[4][4])
 #if defined(__GNUC__) && !defined(NO_ASM) && !defined(NOSSE)
    /* [row][col]*/
   typedef float v4sf __attribute__ ((vector_size (16)));
-  v4sf row0 = __builtin_ia32_loadups(m2[0]);
-  v4sf row1 = __builtin_ia32_loadups(m2[1]);
-  v4sf row2 = __builtin_ia32_loadups(m2[2]);
-  v4sf row3 = __builtin_ia32_loadups(m2[3]);
+  v4sf row0 = _mm_loadu_ps(m2[0]);
+  v4sf row1 = _mm_loadu_ps(m2[1]);
+  v4sf row2 = _mm_loadu_ps(m2[2]);
+  v4sf row3 = _mm_loadu_ps(m2[3]);
 
   for (int i = 0; i < 4; ++i)
   {
-    v4sf leftrow = __builtin_ia32_loadups(m1[i]);
+    v4sf leftrow = _mm_loadu_ps(m1[i]);
 
     // Fill tmp with four copies of leftrow[0]
     v4sf tmp = leftrow;
