From b29763153bce6d47a1575c6c043d5d5eeedeb0d7 Mon Sep 17 00:00:00 2001
From: 0xc0deface <unknown>
Date: Fri, 13 Dec 2013 11:31:47 +1000
Subject: [PATCH] Replaced a call to StringConverter::toString with a call to
 sprintf, as my application was spending 2.8% of runtime in there.

---
 OgreMain/src/OgrePass.cpp | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/OgreMain/src/OgrePass.cpp b/OgreMain/src/OgrePass.cpp
index 2429191e07e..f067051a71e 100644
--- a/OgreMain/src/OgrePass.cpp
+++ b/OgreMain/src/OgrePass.cpp
@@ -686,8 +686,15 @@ namespace Ogre {
                 {
                     // its the last entry in the container so its index is size - 1
                     size_t idx = mTextureUnitStates.size() - 1;
-                    state->setName( StringConverter::toString(idx) );
-                    /** since the name was never set and a default one has been made, clear the alias name
+                    
+					// allow 8 digit hex number. there should never be that many texture units.
+					// This sprintf replaced a call to StringConverter::toString for performance reasons
+					char buff[9];
+					memset(buff, 0, 9);
+					sprintf(buff, "%x", idx);
+                    state->setName( buff );
+                    
+					/** since the name was never set and a default one has been made, clear the alias name
                      so that when the texture unit name is set by the user, the alias name will be set to
                      that name
                     */
