From 131e7179b596f8268fd80c32312849da83581e55 Mon Sep 17 00:00:00 2001
From: "Steinar H. Gunderson" <sgunderson@bigfoot.com>
Date: Sat, 22 Mar 2014 23:25:14 +0100
Subject: [PATCH] Fix a small overallocation.

---
 fft_pass_effect.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fft_pass_effect.cpp b/fft_pass_effect.cpp
index e3999b3..b46e5e5 100644
--- a/fft_pass_effect.cpp
+++ b/fft_pass_effect.cpp
@@ -119,8 +119,8 @@ void FFTPassEffect::generate_support_texture()
 	// bit, so the stride is 8, and so on.
 
 	assert((fft_size & (fft_size - 1)) == 0);  // Must be power of two.
-	fp16_int_t *tmp = new fp16_int_t[fft_size * 4];
 	int subfft_size = 1 << pass_number;
+	fp16_int_t *tmp = new fp16_int_t[subfft_size * 4];
 	double mulfac;
 	if (inverse) {
 		mulfac = 2.0 * M_PI;
