From 228407c45c88fe9fdba242e37ac5ecdd06827a0d Mon Sep 17 00:00:00 2001
From: Luis Ibanez <luis.ibanez@kitware.com>
Date: Fri, 9 Jun 2000 09:41:16 -0400
Subject: [PATCH] ENH: The computation of Jacobian^T * Jacobian is improved by
 using vnl_fastops::AtA()

---
 Code/Common/itkRegistrator3D2D.cxx | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/Code/Common/itkRegistrator3D2D.cxx b/Code/Common/itkRegistrator3D2D.cxx
index 801db3d2d9b..22d6ea06ba9 100644
--- a/Code/Common/itkRegistrator3D2D.cxx
+++ b/Code/Common/itkRegistrator3D2D.cxx
@@ -15,6 +15,7 @@
 =========================================================================*/
 #include "itkRegistrator3D2D.h"
 #include <vnl/algo/vnl_svd.h>
+#include <vnl/vnl_fastops.h>
 
 
 
@@ -454,7 +455,7 @@ void itkRegistrator3D2D::LeastSquareSolution(void)
 	// compute Jacobian^t * Jacobian
 	// this matrix is column ordered
 	// in a one dimensional array
-   M = (*Jacobian) * Jacobian->transpose();
+  vnl_fastops::AtA(*Jacobian, &M);
 
   // Add Uncertainties
   for(int c=0; c<dof; c++) {
