From 797aa12fb3cd6c81429388bc1bea9d9aafdb55c3 Mon Sep 17 00:00:00 2001
From: Hendrik Leppkes <h.leppkes@gmail.com>
Date: Tue, 23 Aug 2022 14:51:53 +0200
Subject: [PATCH] Increase the number of jitter detection samples to a power of
 two

This results in cleaner averages, as well as helps with some samples to
prevent unneeded jitter correction.
---
 decoder/LAVAudio/LAVAudio.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/decoder/LAVAudio/LAVAudio.cpp b/decoder/LAVAudio/LAVAudio.cpp
index 19fd74282..c08fc23e6 100644
--- a/decoder/LAVAudio/LAVAudio.cpp
+++ b/decoder/LAVAudio/LAVAudio.cpp
@@ -1300,12 +1300,12 @@ HRESULT CLAVAudio::ffmpeg_init(AVCodecID codec, const void *format, const GUID f
 
     if (codec == AV_CODEC_ID_DTS || codec == AV_CODEC_ID_TRUEHD)
     {
-        m_faJitter.SetNumSamples(200);
+        m_faJitter.SetNumSamples(256);
         m_JitterLimit = MAX_JITTER_DESYNC * 10;
     }
     else
     {
-        m_faJitter.SetNumSamples(50);
+        m_faJitter.SetNumSamples(64);
         m_JitterLimit = MAX_JITTER_DESYNC;
     }
 
