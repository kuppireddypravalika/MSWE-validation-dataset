From 47f15599e81f5e75599ac1574e6118a89d98c21e Mon Sep 17 00:00:00 2001
From: unknown <heikki@hundin.mysql.fi>
Date: Fri, 28 Jan 2005 21:49:21 +0200
Subject: [PATCH] ut0ut.c:   Use a 32-bit right-shift implementation through a
 64-bit integer that should work ok for both gcc and Visual C++; the code
 depended on defining SIZEOF_LONG, and that is not set when compiling ibbackup

innobase/ut/ut0ut.c:
  Use a 32-bit right-shift implementation through a 64-bit integer that should work ok for both gcc and Visual C++; the code depended on defining SIZEOF_LONG, and that is not set when compiling ibbackup
---
 innobase/ut/ut0ut.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/innobase/ut/ut0ut.c b/innobase/ut/ut0ut.c
index 732380bcb1f..18722149a8f 100644
--- a/innobase/ut/ut0ut.c
+++ b/innobase/ut/ut0ut.c
@@ -44,13 +44,13 @@ ut_get_high32(
 			/* out: a >> 32 */
 	ulint	a)	/* in: ulint */
 {
-#if SIZEOF_LONG == 4
-	UT_NOT_USED(a);
+	ib_longlong	i;
 
-	return 0;
-#else
-	return(a >> 32);
-#endif
+	i = (ib_longlong)a;
+
+	i = i >> 32;
+
+	return((ulint)i);
 }
 
 /************************************************************
