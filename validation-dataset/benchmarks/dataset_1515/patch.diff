From 74240eb29dc66fdde3915d15e2cf5871e5987b0a Mon Sep 17 00:00:00 2001
From: Andreas Nicolai <andreas.nicolai@tu-dresden.de>
Date: Tue, 17 Nov 2020 21:51:51 +0100
Subject: [PATCH] Added magnitudeSquared() function to avoid lengthy sqrt()
 calls when just checking for backfacing planes.

---
 externals/IBKMK/src/IBKMK_Vector3D.h | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/externals/IBKMK/src/IBKMK_Vector3D.h b/externals/IBKMK/src/IBKMK_Vector3D.h
index 8e49b7abb..16622b121 100644
--- a/externals/IBKMK/src/IBKMK_Vector3D.h
+++ b/externals/IBKMK/src/IBKMK_Vector3D.h
@@ -13,7 +13,7 @@
 	   list of conditions and the following disclaimer.
 
 	2. Redistributions in binary form must reproduce the above copyright notice,
-	   this list of conditions and the following disclaimer in the documentation 
+	   this list of conditions and the following disclaimer in the documentation
 	   and/or other materials provided with the distribution.
 
 	3. Neither the name of the copyright holder nor the names of its contributors
@@ -65,6 +65,10 @@ class Vector3D : public IBK::point3D<double> {
 	double magnitude() const {
 		return std::sqrt(m_x*m_x + m_y*m_y + m_z*m_z);
 	}
+	/*! Returns the magnitude^2 of the vector (useful for angle > 0 checks). */
+	double magnitudeSquared() const {
+		return std::sqrt(m_x*m_x + m_y*m_y + m_z*m_z);
+	}
 
 	/*! Returns the cross product of this vector with another.
 		Computes result = this x other.
