From 5d1bcc417e14df088d75c7449edca385524cfdc6 Mon Sep 17 00:00:00 2001
From: David Faure <faure@kde.org>
Date: Sat, 2 Jan 2016 13:47:41 +0100
Subject: [PATCH] Actually fix compilation with Qt 5.3 and use less memory.

---
 src/engine/documenturldb.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/engine/documenturldb.cpp b/src/engine/documenturldb.cpp
index be63f274b..5083e7a38 100644
--- a/src/engine/documenturldb.cpp
+++ b/src/engine/documenturldb.cpp
@@ -146,17 +146,17 @@ QByteArray DocumentUrlDB::get(quint64 docId) const
         return QByteArray();
     }
 
-    QByteArrayList list = {path.name};
+    QByteArray ret = path.name;
     quint64 id = path.parentId;
     while (id) {
         auto p = idFilenameDb.get(id);
         Q_ASSERT(!p.name.isEmpty());
 
-        list.prepend(p.name);
+        ret = p.name + '/' + ret;
         id = p.parentId;
     }
 
-    return '/' + list.join('/');
+    return '/' + ret;
 }
 
 QVector<quint64> DocumentUrlDB::getChildren(quint64 docId) const
