From 02f2be275f145e81e8a925771aecc1479e1d441b Mon Sep 17 00:00:00 2001
From: Arushi Aggarwal <aggarwa4@illinois.edu>
Date: Tue, 16 Nov 2010 22:49:16 +0000
Subject: [PATCH] Use a set instead of list to keep track of DSGraphs.

git-svn-id: https://llvm.org/svn/llvm-project/poolalloc/trunk@119401 91177308-0d34-0410-b5e6-96231b3b80d8
---
 lib/DSA/EquivClassGraphs.cpp | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/lib/DSA/EquivClassGraphs.cpp b/lib/DSA/EquivClassGraphs.cpp
index a3384396..b3fd36cd 100644
--- a/lib/DSA/EquivClassGraphs.cpp
+++ b/lib/DSA/EquivClassGraphs.cpp
@@ -43,11 +43,11 @@ bool EquivBUDataStructures::runOnModule(Module &M) {
   init(&getAnalysis<CompleteBUDataStructures>(), false, true, false, true);
 
   //make a list of all the DSGraphs
-  std::list<DSGraph *>graphList;
+  std::set<DSGraph *>graphList;
   for(Module::iterator F = M.begin(); F != M.end(); ++F) 
   {
     if(!(F->isDeclaration()))
-      graphList.push_back(getOrCreateGraph(F));
+      graphList.insert(getOrCreateGraph(F));
   }
 
   //update the EQ class from indirect calls
@@ -58,10 +58,10 @@ bool EquivBUDataStructures::runOnModule(Module &M) {
   for(Module::iterator F = M.begin(); F != M.end(); ++F) 
   {
     if(!(F->isDeclaration()))
-      graphList.remove(getOrCreateGraph(F));
+      graphList.erase(getOrCreateGraph(F));
   }
   // free memory for the DSGraphs, no longer in use.
-  for(std::list<DSGraph*>::iterator i = graphList.begin(),e = graphList.end();
+  for(std::set<DSGraph*>::iterator i = graphList.begin(),e = graphList.end();
       i!=e;i++) {
     delete (*i);
   }
