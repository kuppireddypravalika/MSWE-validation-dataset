From 1f1ea3f12e50c71c7c10d4fd1d79ef8da0447bc2 Mon Sep 17 00:00:00 2001
From: Curtis Gedak <gedakc@gmail.com>
Date: Sun, 25 Mar 2012 10:10:47 -0600
Subject: [PATCH] Use cached method first to read UUID to shorten scan time

---
 src/GParted_Core.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/GParted_Core.cc b/src/GParted_Core.cc
index 7df29ac8..62be59e5 100644
--- a/src/GParted_Core.cc
+++ b/src/GParted_Core.cc
@@ -1042,6 +1042,8 @@ void GParted_Core::set_device_partitions( Device & device )
 		if ( partition_temp .get_path() != "" )
 		{
 			//Retrieve file system label
+			//  Use file system specific method first in an effort to ensure multi-byte
+			//  character sets are properly displayed.
 			read_label( partition_temp ) ;
 			if ( partition_temp .label .empty() )
 			{
@@ -1050,10 +1052,11 @@ void GParted_Core::set_device_partitions( Device & device )
 			}
 
 			//Retrieve file system UUID
-			read_uuid( partition_temp ) ;
+			//  Use cached method first in an effort to speed up device scanning.
+			partition_temp .uuid = fs_info .get_uuid( partition_temp .get_path() ) ;
 			if ( partition_temp .uuid .empty() )
 			{
-				partition_temp .uuid = fs_info .get_uuid( partition_temp .get_path() ) ;
+				read_uuid( partition_temp ) ;
 			}
 		}
 
