From 0ab3a2bd512bce3417334320e3c91aee6a8b953d Mon Sep 17 00:00:00 2001
From: Kunal Tyagi <tyagi.kunal@live.com>
Date: Thu, 9 Jan 2020 16:13:51 +0900
Subject: [PATCH] narf.cpp: Using algorithms and Eigen functions for better
 code

---
 features/src/narf.cpp | 15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)

diff --git a/features/src/narf.cpp b/features/src/narf.cpp
index cc1df7875b2..50258ddf969 100644
--- a/features/src/narf.cpp
+++ b/features/src/narf.cpp
@@ -260,16 +260,11 @@ Narf::extractFromRangeImageWithBestRotation (const RangeImage& range_image, cons
   getRotations(rotations, strengths);
   if (rotations.empty())
     return false;
-  float best_rotation=rotations[0], best_strength=strengths[0];
-  for (std::size_t i = 1; i < rotations.size(); ++i)
-  {
-    if (strengths[i] > best_strength)
-    {
-      best_rotation = rotations[i];
-      best_strength = strengths[i];
-    }
-  }
-  
+
+  const auto max_it = std::max_element(strengths.cbegin (), strengths.cend ());
+  const auto max_idx = std::distance(strengths.cbegin (), max_it);
+  const auto best_rotation = rotations[max_idx];
+
   transformation_ = Eigen::AngleAxisf(-best_rotation, Eigen::Vector3f(0.0f, 0.0f, 1.0f))*transformation_;
   surface_patch_rotation_ = best_rotation;
   return extractDescriptor(descriptor_size_);
