From 327d85d9bab7476d0046cf291d20dad5058abdf2 Mon Sep 17 00:00:00 2001
From: Jeffrey Walton <noloader@gmail.com>
Date: Mon, 19 Apr 2021 14:21:48 -0400
Subject: [PATCH] Enable AVX2 for LSH word_perm

---
 lsh256.cpp | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/lsh256.cpp b/lsh256.cpp
index 98dad0ab9..0afbf88fb 100644
--- a/lsh256.cpp
+++ b/lsh256.cpp
@@ -683,8 +683,7 @@ inline void word_perm(lsh_u32* cv_l, lsh_u32* cv_r)
 	CRYPTOPP_ASSERT(cv_l != NULLPTR);
 	CRYPTOPP_ASSERT(cv_r != NULLPTR);
 
-	// Don't use AVX2 here. It is 0.5 cpb slower.
-#if 0 // defined(CRYPTOPP_LSH256_AVX2_AVAILABLE)
+#if defined(CRYPTOPP_LSH256_AVX2_AVAILABLE)
 	__m256i temp;
 	temp = _mm256_shuffle_epi32(
 		_mm256_loadu_si256(CONST_M256_CAST(cv_l)), _MM_SHUFFLE(3,1,0,2));
