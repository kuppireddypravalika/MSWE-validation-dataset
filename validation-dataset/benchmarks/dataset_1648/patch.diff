From b86b415337640c1ca85405b61d98021eeb646363 Mon Sep 17 00:00:00 2001
From: Anton Kudryavtsev <anton.kudryavtsev@vk.team>
Date: Thu, 7 Sep 2023 22:54:56 +0300
Subject: [PATCH] qtexthtmlparser: use tokenize instead of split
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

to avoid needless tmp list

Change-Id: I5f6bc9c3edd17c04e5293feb0aad86cd5ed49695
Reviewed-by: MÃ¥rten Nordheim <marten.nordheim@qt.io>
Reviewed-by: Edward Welbourne <edward.welbourne@qt.io>
---
 src/gui/text/qtexthtmlparser.cpp | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/src/gui/text/qtexthtmlparser.cpp b/src/gui/text/qtexthtmlparser.cpp
index 7715df90ce59..1168c6d5cd8b 100644
--- a/src/gui/text/qtexthtmlparser.cpp
+++ b/src/gui/text/qtexthtmlparser.cpp
@@ -1594,10 +1594,9 @@ void QTextHtmlParser::applyAttributes(const QStringList &attributes)
                     node->charFormat.setProperty(QTextFormat::FontSizeAdjustment, n);
                 } else if (key == "face"_L1) {
                     if (value.contains(u',')) {
-                        const QStringList values = value.split(u',');
                         QStringList families;
-                        for (const QString &family : values)
-                            families << family.trimmed();
+                        for (auto family : value.tokenize(u','))
+                            families << family.trimmed().toString();
                         node->charFormat.setFontFamilies(families);
                     } else {
                         node->charFormat.setFontFamilies(QStringList(value));
