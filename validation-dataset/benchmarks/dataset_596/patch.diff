From 844719de3571a3a7c3692a8c47abce14e2a6bff9 Mon Sep 17 00:00:00 2001
From: Ziqi Wang <675973885@qq.com>
Date: Sun, 12 Jun 2016 15:30:48 -0400
Subject: [PATCH] Optimize AdjustNodeSize() to decrease unnecessary
 CollectAll...() calls. 1/3 performance increase (impressive)

---
 bwtree.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/bwtree.h b/bwtree.h
index 8d23ecf..7a3b46e 100644
--- a/bwtree.h
+++ b/bwtree.h
@@ -5342,10 +5342,10 @@ class BwTree {
       // NOTE: This causes problem for later uses since it
       // fills the node with actual value
       if(snapshot_p->has_data == false) {
-        CollectAllValuesOnLeaf(snapshot_p);
+        //CollectAllValuesOnLeaf(snapshot_p);
       }
 
-      assert(snapshot_p->has_data == true);
+      //assert(snapshot_p->has_data == true);
 
       size_t node_size = leaf_node_p->data_list.size();
 
@@ -5468,10 +5468,10 @@ class BwTree {
         static_cast<const InnerNode *>(node_p);
 
       if(snapshot_p->has_data == false) {
-        CollectAllSepsOnInner(snapshot_p);
+        //CollectAllSepsOnInner(snapshot_p);
       }
 
-      assert(snapshot_p->has_data == true);
+      //assert(snapshot_p->has_data == true);
 
       size_t node_size = inner_node_p->sep_list.size();
 
