From 004cf9f374d2a89447ab0135c42c4e8eff4ce733 Mon Sep 17 00:00:00 2001
From: Andrew Lenharth <andrewl@lenharth.org>
Date: Sat, 20 Mar 2010 15:19:34 +0000
Subject: [PATCH] specialize insert for other sets.  MUCH FASTER

git-svn-id: https://llvm.org/svn/llvm-project/poolalloc/trunk@99057 91177308-0d34-0410-b5e6-96231b3b80d8
---
 include/dsa/svset.h | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/include/dsa/svset.h b/include/dsa/svset.h
index bad2537e..ffae0461 100644
--- a/include/dsa/svset.h
+++ b/include/dsa/svset.h
@@ -147,6 +147,15 @@ class svset {
     sort_unique();
   }
 
+  //specialized insert for another svset
+  void insert(const_iterator ii, const_iterator ie ) {
+    internal_type ctemp;
+    ctemp.reserve(container_.size());
+    std::set_union(ii, ie, container_.begin(), container_.end(),
+                   std::back_inserter(ctemp));
+    container_.swap(ctemp);
+  }
+
   void erase ( iterator position ) {
     container_.erase(position);
   }
