From d4f311b7be09abf9ed97326f3ef69a59409e08a2 Mon Sep 17 00:00:00 2001
From: Yurun <admin@yurunsoft.com>
Date: Sat, 10 Dec 2022 14:52:39 +0800
Subject: [PATCH] Fix wrong number of loops (#4926)

* Fix wrong number of loops

* Optimise

* Optimize
---
 ext-src/php_swoole.cc | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/ext-src/php_swoole.cc b/ext-src/php_swoole.cc
index b4a151b6395..5377449ed7a 100644
--- a/ext-src/php_swoole.cc
+++ b/ext-src/php_swoole.cc
@@ -706,16 +706,14 @@ PHP_MINIT_FUNCTION(swoole) {
     zend::known_strings_init();
 
     /* Debug extensions check */
-    static const char *debug_zend_extension_names[] = { "Xdebug" };
-    static const char *debug_php_extension_names[] = { "ddtrace" };
-    for (size_t i = 0; i < sizeof(debug_zend_extension_names); i++) {
-        const char *name = debug_zend_extension_names[i];
+    static auto debug_zend_extension_names = { "Xdebug" };
+    for (auto name : debug_zend_extension_names) {
         if (zend_get_extension(name) != NULL) {
             SWOOLE_G(has_debug_extension) = 1;
         }
     }
-    for (size_t i = 0; i < sizeof(debug_php_extension_names); i++) {
-        const char *name = debug_php_extension_names[i];
+    static auto debug_php_extension_names = { "ddtrace" };
+    for (auto name : debug_php_extension_names) {
         if (zend_hash_str_find_ptr(&module_registry, name, strlen(name))) {
             SWOOLE_G(has_debug_extension) = 1;
         }
