From 7e38b29d6ef1146653df974b097c0024e3db4bf8 Mon Sep 17 00:00:00 2001
From: Rainer Kuemmerle <rainer.kuemmerle@gmail.com>
Date: Sun, 26 Mar 2023 15:01:48 +0200
Subject: [PATCH] Fix performance of substr

---
 g2o/core/sparse_block_matrix.hpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/g2o/core/sparse_block_matrix.hpp b/g2o/core/sparse_block_matrix.hpp
index be723a1dc..54d37f4b1 100644
--- a/g2o/core/sparse_block_matrix.hpp
+++ b/g2o/core/sparse_block_matrix.hpp
@@ -603,7 +603,7 @@ bool SparseBlockMatrix<MatrixType>::writeOctave(const char* filename,
                                                 bool upperTriangle) const {
   std::string name = filename;
   std::string::size_type lastDot = name.find_last_of('.');
-  if (lastDot != std::string::npos) name = name.substr(0, lastDot);
+  if (lastDot != std::string::npos) name.resize(lastDot);
 
   std::vector<TripletEntry> entries;
   for (size_t i = 0; i < _blockCols.size(); ++i) {
