From 9ed96c5acfc4fe9172cf6852674adabe0f3ad19f Mon Sep 17 00:00:00 2001
From: Xottab-DUTY <xottab-duty@yandex.ru>
Date: Fri, 9 Nov 2018 22:51:32 +0500
Subject: [PATCH] xrGame/MainMenu.cpp: replace std::for_each with range-based
 for

---
 src/xrGame/MainMenu.cpp | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

diff --git a/src/xrGame/MainMenu.cpp b/src/xrGame/MainMenu.cpp
index 758afccafd7..a15695ea1d9 100644
--- a/src/xrGame/MainMenu.cpp
+++ b/src/xrGame/MainMenu.cpp
@@ -189,15 +189,7 @@ void CMainMenu::ReadTextureInfo()
 
     const auto ParseFileSet = [&]()
     {
-        /*
-         * Original CoP textures_descr
-         * loading time:
-         * Single-threaded ~80 ms
-         * Multi-threaded  ~40 ms
-         * Just a bit of speedup
-        */
-//        tbb::parallel_for_each(files, [](const FS_File& file) // Cause memory corruption (detected by Valgrind)
-        std::for_each(files.begin(), files.end(), [](const FS_File& file)
+        for (const auto& file : files)
         {
             string_path path, name;
             _splitpath(file.name.c_str(), nullptr, path, name, nullptr);
@@ -205,7 +197,7 @@ void CMainMenu::ReadTextureInfo()
             path[xr_strlen(path) - 1] = '\0'; // cut the latest '\\'
 
             CUITextureMaster::ParseShTexInfo(path, name);
-        });
+        }
     };
 
     UpdateFileSet(UI_PATH_DEFAULT);
