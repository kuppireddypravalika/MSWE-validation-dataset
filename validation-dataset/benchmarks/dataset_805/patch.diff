From 2c9373430a86c3631cedc0afc4017baa47ed04e1 Mon Sep 17 00:00:00 2001
From: Jason Luu <jasonkailuu@gmail.com>
Date: Fri, 13 Jul 2012 19:20:27 +0000
Subject: [PATCH] Corrected memory leak caused by freeing printhandler too
 early.

git-svn-id: https://vtr-verilog-to-routing.googlecode.com/svn/trunk@588 8e3573b8-cf2c-4f14-ef6d-137439e28b8b
---
 vpr/SRC/main.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/vpr/SRC/main.c b/vpr/SRC/main.c
index 1843ec14fb9..1697b45c3c7 100644
--- a/vpr/SRC/main.c
+++ b/vpr/SRC/main.c
@@ -50,9 +50,7 @@ int main(int argc, char **argv) {
 		vpr_init_pre_place_and_route(vpr_setup, Arch);
 		vpr_place_and_route(vpr_setup, Arch);
 	}
-	/* free data structures */
-	vpr_free_all(Arch, Options, vpr_setup);
-
+	
 	entire_flow_end = clock();
 	
 	#ifdef CLOCKS_PER_SEC
@@ -61,6 +59,9 @@ int main(int argc, char **argv) {
 		vpr_printf(TIO_MESSAGE_INFO, "The entire flow of VPR took %g seconds.\n", (float)(entire_flow_end - entire_flow_begin) / CLK_PER_SEC);
 	#endif
 	
+	/* free data structures */
+	vpr_free_all(Arch, Options, vpr_setup);
+
 	/* Return 0 to single success to scripts */
 	return 0;
 }
