From aeed3a90ceedca2111fc93301de2acc38a80229c Mon Sep 17 00:00:00 2001
From: Marshall Clow <mclow@qualcomm.com>
Date: Tue, 3 Jan 2012 23:26:09 +0000
Subject: [PATCH] Don't allocate TLS storage when checking to see if an
 exception has been thrown - really

git-svn-id: https://llvm.org/svn/llvm-project/libcxxabi/trunk@147497 91177308-0d34-0410-b5e6-96231b3b80d8
---
 src/cxa_exception.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/cxa_exception.cpp b/src/cxa_exception.cpp
index 1887c5a..a011dd0 100644
--- a/src/cxa_exception.cpp
+++ b/src/cxa_exception.cpp
@@ -386,7 +386,7 @@ void*
 __cxa_current_primary_exception() throw()
 {
 //  get the current exception
-    __cxa_eh_globals* globals = __cxa_get_globals();
+    __cxa_eh_globals* globals = __cxa_get_globals_fast();
     if (NULL == globals)
         return NULL;        //  Never has been an exception
     __cxa_exception* current_exception = globals->caughtExceptions;
