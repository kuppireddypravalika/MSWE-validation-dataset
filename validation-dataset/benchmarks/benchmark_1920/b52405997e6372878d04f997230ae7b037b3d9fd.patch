From b52405997e6372878d04f997230ae7b037b3d9fd Mon Sep 17 00:00:00 2001
From: David Korth <gerbilsoft@gerbilsoft.com>
Date: Tue, 8 Jan 2019 00:20:02 -0500
Subject: [PATCH] [librpbase] ImageDecoder_BC7: Fix copy/paste errors in
 component rotation.

This fixes a regression from commit 4cd315dcf324189b882d4946a906b677db6df6aa.
([librpbase] ImageDecoder_BC7: std::swap<> seems to be rather inefficient
in some cases when using -ftree-vectorize.)
---
 src/librpbase/img/ImageDecoder_BC7.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/librpbase/img/ImageDecoder_BC7.cpp b/src/librpbase/img/ImageDecoder_BC7.cpp
index 680cb2724a..859966d39f 100644
--- a/src/librpbase/img/ImageDecoder_BC7.cpp
+++ b/src/librpbase/img/ImageDecoder_BC7.cpp
@@ -684,7 +684,7 @@ rp_image *ImageDecoder::fromBC7(int width, int height,
 				for (unsigned int i = 0; i < 16; i++) {
 					uint8_t a = tileBuf[i].a;
 					tileBuf[i].a = tileBuf[i].g;
-					tileBuf[i].r = a;
+					tileBuf[i].g = a;
 				}
 				break;
 			case 3:
@@ -692,7 +692,7 @@ rp_image *ImageDecoder::fromBC7(int width, int height,
 				for (unsigned int i = 0; i < 16; i++) {
 					uint8_t a = tileBuf[i].a;
 					tileBuf[i].a = tileBuf[i].b;
-					tileBuf[i].r = a;
+					tileBuf[i].b = a;
 				}
 				break;
 		}
