From 7b52e5cfc1004e8ff4e36ec8812431e4d4e04af5 Mon Sep 17 00:00:00 2001
From: vTurbine <vtrubiloff@gmail.com>
Date: Tue, 9 Aug 2022 21:36:11 +0200
Subject: [PATCH] xrRender: camera movement tolerance increased

Less sector detection runs when camera movement is imperceptible
---
 src/Layers/xrRender_R2/r2_R_calculate.cpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/Layers/xrRender_R2/r2_R_calculate.cpp b/src/Layers/xrRender_R2/r2_R_calculate.cpp
index b82250a7105..659f77a87b5 100644
--- a/src/Layers/xrRender_R2/r2_R_calculate.cpp
+++ b/src/Layers/xrRender_R2/r2_R_calculate.cpp
@@ -11,6 +11,8 @@ extern float r_ssaLOD_B;
 extern float r_ssaHZBvsTEX;
 extern float r_ssaGLOD_start, r_ssaGLOD_end;
 
+static auto constexpr DELTA_CAMERA_POS = .001f;
+
 void CRender::Calculate()
 {
     // Transfer to global space to avoid deep pointer access
@@ -27,7 +29,7 @@ void CRender::Calculate()
     r_dtex_range = ps_r2_df_parallax_range * g_fSCREEN / (1024.f * 768.f);
 
     // Detect camera-sector
-    if (!vLastCameraPos.similar(Device.vCameraPosition, EPS_S))
+    if (!vLastCameraPos.similar(Device.vCameraPosition, DELTA_CAMERA_POS))
     {
         // Search for default sector - assume "default" or "outdoor" sector is the largest one
         //. hack: need to know real outdoor sector
