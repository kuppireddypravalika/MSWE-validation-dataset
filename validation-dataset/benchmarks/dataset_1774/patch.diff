From 06dc1570fc6ca006aae043737293e992f8268daa Mon Sep 17 00:00:00 2001
From: Simon De Backer <simondebacker@msn.com>
Date: Thu, 6 Aug 2020 22:19:44 +0200
Subject: [PATCH] Test writeToFile on a other Thread

to improve this for windows performance
---
 sources/qetproject.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/sources/qetproject.cpp b/sources/qetproject.cpp
index a423e0c05a..3cf677761c 100644
--- a/sources/qetproject.cpp
+++ b/sources/qetproject.cpp
@@ -33,6 +33,7 @@
 #include <QTimer>
 #include <QStandardPaths>
 #include <utility>
+#include <QtConcurrent>
 
 static int BACKUP_INTERVAL = 120000; //interval in ms of backup = 2min
 
@@ -1607,7 +1608,9 @@ NamesList QETProject::namesListForIntegrationCategory() {
 void QETProject::writeBackup()
 {
     QDomDocument xml_project(toXml());
-	QET::writeToFile(xml_project, &m_backup_file);
+	QString temp;
+	QFuture<void> bac = QtConcurrent::run(QET::writeToFile,xml_project,&m_backup_file,&temp);
+	bac.waitForFinished();
 }
 
 /**
