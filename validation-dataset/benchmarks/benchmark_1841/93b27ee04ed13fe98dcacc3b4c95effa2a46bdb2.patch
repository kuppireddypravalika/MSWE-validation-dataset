From 93b27ee04ed13fe98dcacc3b4c95effa2a46bdb2 Mon Sep 17 00:00:00 2001
From: Alfredo Correa <correaa@llnl.gov>
Date: Wed, 21 Sep 2022 13:10:13 -0700
Subject: [PATCH] use ptrdiff for size

---
 src/AFQMC/HamiltonianOperations/KP3IndexFactorization.hpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/AFQMC/HamiltonianOperations/KP3IndexFactorization.hpp b/src/AFQMC/HamiltonianOperations/KP3IndexFactorization.hpp
index 544d0f2860..79f1a50e31 100644
--- a/src/AFQMC/HamiltonianOperations/KP3IndexFactorization.hpp
+++ b/src/AFQMC/HamiltonianOperations/KP3IndexFactorization.hpp
@@ -1126,8 +1126,8 @@ class KP3IndexFactorization
   void vHS(MatA& Xw, MatB&& v, double a = 1., double c = 0.)
   {
     int nkpts = nopk.size();
-    int nwalk = Xw.size(1);
-    assert(v.size(0) == nwalk);
+    int nwalk = std::get<1>(Xw.sizes());
+    assert(v.size() == nwalk);
     int nspin     = (walker_type == COLLINEAR ? 2 : 1);
     int nmo_tot   = std::accumulate(nopk.begin(), nopk.end(), 0);
     int nmo_max   = *std::max_element(nopk.begin(), nopk.end());
@@ -1139,7 +1139,7 @@ class KP3IndexFactorization
     SPComplexType halfa(0.5 * a, 0.0);
     size_t local_memory_needs = nmo_max * nmo_max * nwalk;
     if (TMats.num_elements() < local_memory_needs)
-      TMats.reextent({local_memory_needs, 1});
+      TMats.reextent({static_cast<ptrdiff_t>(local_memory_needs), 1});
 
     using vType = typename std::decay<MatB>::type::element;
     boost::multi::array_ref<vType, 3> v3D(to_address(v.origin()), {nwalk, nmo_tot, nmo_tot});
