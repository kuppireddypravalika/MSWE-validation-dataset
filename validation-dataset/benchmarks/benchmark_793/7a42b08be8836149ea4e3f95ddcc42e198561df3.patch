From 7a42b08be8836149ea4e3f95ddcc42e198561df3 Mon Sep 17 00:00:00 2001
From: Evan Cheng <evan.cheng@apple.com>
Date: Fri, 19 Jun 2009 06:56:26 +0000
Subject: [PATCH] Should be using Bcc (average) latency to determine
 if-conversion threshold, not BL.

git-svn-id: https://llvm.org/svn/llvm-project/llvm/trunk@73759 91177308-0d34-0410-b5e6-96231b3b80d8
---
 lib/Target/ARM/ARMISelLowering.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/Target/ARM/ARMISelLowering.cpp b/lib/Target/ARM/ARMISelLowering.cpp
index 38a2fb9b4d0..345f172deb7 100644
--- a/lib/Target/ARM/ARMISelLowering.cpp
+++ b/lib/Target/ARM/ARMISelLowering.cpp
@@ -296,7 +296,7 @@ ARMTargetLowering::ARMTargetLowering(TargetMachine &TM)
     // Use branch latency information to determine if-conversion limits.
     const TargetInstrInfo *TII = getTargetMachine().getInstrInfo();
     const InstrItineraryData &InstrItins = Subtarget->getInstrItineraryData();
-    unsigned Latency = InstrItins.getLatency(TII->get(ARM::BL).getSchedClass());
+    unsigned Latency= InstrItins.getLatency(TII->get(ARM::Bcc).getSchedClass());
     if (Latency > 1) {
       setIfCvtBlockSizeLimit(Latency-1);
       if (Latency > 2)
