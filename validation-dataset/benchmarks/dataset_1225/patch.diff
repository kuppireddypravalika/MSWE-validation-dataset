From b7d7fb39e3c186cc3fa31d5c6816cc498af48c14 Mon Sep 17 00:00:00 2001
From: Hendrik Leppkes <h.leppkes@gmail.com>
Date: Thu, 12 Nov 2020 00:52:09 +0100
Subject: [PATCH] pixconv: fixed size offset to use optimized loop for more of
 the image

---
 decoder/LAVVideo/pixconv/convert_direct.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/decoder/LAVVideo/pixconv/convert_direct.cpp b/decoder/LAVVideo/pixconv/convert_direct.cpp
index 731d1a1c5..0429053fd 100644
--- a/decoder/LAVVideo/pixconv/convert_direct.cpp
+++ b/decoder/LAVVideo/pixconv/convert_direct.cpp
@@ -202,7 +202,7 @@ DECLARE_CONV_FUNC_IMPL(convert_p010_nv12_direct_sse4)
     const ptrdiff_t chromaHeight = (height >> 1);
 
     const ptrdiff_t byteWidth = width << 1;
-    const ptrdiff_t stride = min(FFALIGN(byteWidth, 64), min(inStride, outStride));
+    const ptrdiff_t stride = min(FFALIGN(byteWidth, 64), min(inStride, outStride << 1));
 
     LAVDitherMode ditherMode = m_pSettings->GetDitherMode();
     const uint16_t *dithers = GetRandomDitherCoeffs(height, 4, 8, 0);
