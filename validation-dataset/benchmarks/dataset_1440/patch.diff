From 01193094adbb1852550b23905b9acd6715081477 Mon Sep 17 00:00:00 2001
From: Christian Engwer <christi@dune-project.org>
Date: Wed, 24 Sep 2008 20:40:54 +0000
Subject: [PATCH] use a few less iterations

[[Imported from SVN: r5289]]
---
 common/test/smallobject.cc | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/common/test/smallobject.cc b/common/test/smallobject.cc
index 65870e823..6162b4e91 100644
--- a/common/test/smallobject.cc
+++ b/common/test/smallobject.cc
@@ -37,7 +37,7 @@ int main ( int argc, char **argv )
 {
   Timer timer;
 
-  const unsigned long iterations = 1 << 30;
+  const unsigned long iterations = 1 << 25;
   std :: cout << "Performing " << iterations << " iterations." << std :: endl;
 
   timer.reset();
@@ -71,4 +71,11 @@ int main ( int argc, char **argv )
   double timeB2 = timer.elapsed();
   std :: cout << "Time with pool allocator: " << timeB2 << std :: endl;
   std :: cout << "Result: pool allocator is " << (timeA / timeB2) << " times faster." << std :: endl;
+  std :: cout << "Result: pool allocator is " << (timeB / timeB2) << " times faster than SmallObject." << std :: endl;
+
+  // we require a speedup due to SmallObject
+  assert((timeA / timeB) > 1.0);
+
+  // we require the speed of the poolallocator
+  // assert((timeB2 / timeB) > 1.0);
 }
