From 85ac90cd984fc78084b38245f389fe763ce2917a Mon Sep 17 00:00:00 2001
From: laura-ding <48548375+laura-ding@users.noreply.github.com>
Date: Wed, 11 Nov 2020 09:32:14 +0800
Subject: [PATCH] modify folly::hash::fnv64_buf to MurmurHash2 (#290)

Co-authored-by: dutor <440396+dutor@users.noreply.github.com>
---
 src/common/clients/meta/MetaClient.cpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/common/clients/meta/MetaClient.cpp b/src/common/clients/meta/MetaClient.cpp
index f27d8f99bd6..45cbd6584d2 100644
--- a/src/common/clients/meta/MetaClient.cpp
+++ b/src/common/clients/meta/MetaClient.cpp
@@ -5,6 +5,7 @@
  */
 
 #include "common/base/Base.h"
+#include "common/base/MurmurHash2.h"
 #include <folly/hash/Hash.h>
 #include "common/clients/meta/MetaClient.h"
 #include "common/network/NetworkUtils.h"
@@ -796,7 +797,8 @@ StatusOr<PartitionID> MetaClient::partId(GraphSpaceID spaceId, const VertexID id
     if (id.size() == 8) {
         memcpy(static_cast<void*>(&vid), id.data(), 8);
     } else {
-        vid = folly::hash::fnv64_buf(id.data(), id.size());
+        MurmurHash2 hash;
+        vid = hash(id.data());
     }
     PartitionID pId = vid % numParts + 1;
     CHECK_GT(pId, 0U);
