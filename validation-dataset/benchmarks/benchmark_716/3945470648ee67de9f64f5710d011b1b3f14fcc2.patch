From 3945470648ee67de9f64f5710d011b1b3f14fcc2 Mon Sep 17 00:00:00 2001
From: Linas Vepstas <linasvepstas@gmail.com>
Date: Mon, 2 Feb 2015 13:26:39 -0600
Subject: [PATCH] guile: Minor performance improvement.

---
 opencog/guile/SchemeEval.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/opencog/guile/SchemeEval.cc b/opencog/guile/SchemeEval.cc
index 11fb5ffdde..041bd05c1e 100644
--- a/opencog/guile/SchemeEval.cc
+++ b/opencog/guile/SchemeEval.cc
@@ -805,9 +805,12 @@ SCM SchemeEval::do_scm_eval_str(const std::string &expr)
 
 	_caught_error = false;
 	set_captured_stack(SCM_BOOL_F);
+
+	// scm_from_utf8_string is lots faster than scm_from_locale_string
+	SCM expr_str = scm_from_utf8_string(expr.c_str());
 	SCM rc = scm_c_catch (SCM_BOOL_T,
-	                      (scm_t_catch_body) scm_c_eval_string,
-	                      (void *) expr.c_str(),
+	                      (scm_t_catch_body) scm_eval_string,
+	                      (void *) expr_str,
 	                      SchemeEval::catch_handler_wrapper, this,
 	                      SchemeEval::preunwind_handler_wrapper, this);
 
