From 1a89bd11766780567e49db35d995d0b4d0103526 Mon Sep 17 00:00:00 2001
From: Peter Vanroose <peter_vanroose@users.sourceforge.net>
Date: Fri, 24 Aug 2001 08:40:52 -0400
Subject: [PATCH] avoid CString::operator+=() since it has O(n^2) behaviour

---
 core/vgui/impl/mfc/vgui_mfc_dialog_impl.cxx | 12 ++++--------
 1 file changed, 4 insertions(+), 8 deletions(-)

diff --git a/core/vgui/impl/mfc/vgui_mfc_dialog_impl.cxx b/core/vgui/impl/mfc/vgui_mfc_dialog_impl.cxx
index 5a46efe6bfb..d5c5dbdae71 100644
--- a/core/vgui/impl/mfc/vgui_mfc_dialog_impl.cxx
+++ b/core/vgui/impl/mfc/vgui_mfc_dialog_impl.cxx
@@ -131,14 +131,10 @@ void vgui_mfc_dialog_impl::OnChooseColour(UINT uID)
         CColorDialog colour_dialog(0,0, this);
         colour_dialog.DoModal();
         COLORREF colour = colour_dialog.GetColor();
-        sprintf(buffer,"%4.3f",float(colour&0xff)/255.0);
-        CString s(buffer);
-        s+=" ";
-        sprintf(buffer,"%4.3f",float((colour>>8)&0xff)/255.0);
-        s+=buffer;
-        s+=" ";
-        sprintf(buffer,"%4.3f",float((colour>>16)&0xff)/255.0);
-        s+=buffer;
+        sprintf(buffer,"%4.3f %4.3f %4.3f",float(colour&0xff)/255.0,
+                                           float((colour>>8)&0xff)/255.0,
+                                           float((colour>>16)&0xff)/255.0);
+        CString s(buffer); // avoiding CString::operator+=()'s O(n^2) behaviour
         csrs[which]->SetWindowText(s);
 }
 
