From 728eb3a49cd9208c41f73f8d44982aaf6dbfb292 Mon Sep 17 00:00:00 2001
From: Will Dietz <wdietz2@illinois.edu>
Date: Sat, 23 Jun 2012 02:56:56 +0000
Subject: [PATCH] Local: Check for aliasing (EC'd) globals after processing
 each function.

In global-heavy programs (403.gcc) saves a fair chunk of runtime and memory:
16s -> 13s, 487M -> 413M .

Across SPECCINT2006 all -dsa-local is faster and uses less memory.

git-svn-id: https://llvm.org/svn/llvm-project/poolalloc/trunk@159062 91177308-0d34-0410-b5e6-96231b3b80d8
---
 lib/DSA/Local.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/lib/DSA/Local.cpp b/lib/DSA/Local.cpp
index 9447ba4f..87eac94a 100644
--- a/lib/DSA/Local.cpp
+++ b/lib/DSA/Local.cpp
@@ -1395,6 +1395,7 @@ bool LocalDataStructures::runOnModule(Module &M) {
       cloneIntoGlobals(G, DSGraph::DontCloneCallNodes |
                        DSGraph::DontCloneAuxCallNodes |
                        DSGraph::StripAllocaBit);
+      formGlobalECs();
       DEBUG(G->AssertGraphOK());
     }
 
