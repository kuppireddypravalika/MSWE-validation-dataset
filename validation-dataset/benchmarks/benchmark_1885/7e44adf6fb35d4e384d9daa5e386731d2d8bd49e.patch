From 7e44adf6fb35d4e384d9daa5e386731d2d8bd49e Mon Sep 17 00:00:00 2001
From: Andrea Mattavelli <andreamattavelli@gmail.com>
Date: Wed, 20 Sep 2017 11:22:24 +0100
Subject: [PATCH] Added option to control SVF use in slicing

---
 lib/Module/KModule.cpp | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/lib/Module/KModule.cpp b/lib/Module/KModule.cpp
index 63d2d05e..e85191c0 100644
--- a/lib/Module/KModule.cpp
+++ b/lib/Module/KModule.cpp
@@ -106,6 +106,11 @@ namespace {
   cl::opt<bool>
   DebugPrintEscapingFunctions("debug-print-escaping-functions", 
                               cl::desc("Print functions whose address is taken."));
+
+  cl::opt<bool>
+  UseSVFPTA("use-svf-analysis",
+            cl::desc("Use SVF pointer analysis for slicing (default=on)"),
+            cl::init(true));
 }
 
 KModule::KModule(Module *_module) 
@@ -462,7 +467,7 @@ void KModule::prepare(const Interpreter::ModuleOptions &opts,
     /* run reachability analysis */
     klee_message("Runnining reachability analysis...");
     ra->usePA(aa);
-    ra->run(true);
+    ra->run(UseSVFPTA);
 
     /* run mod-ref analysis */
     klee_message("Runnining mod-ref analysis...");
