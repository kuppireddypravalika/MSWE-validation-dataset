From b2e3cf53e99caad7ebc9e4f31f847aeac08a13d2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C5=82=20=27Griwes=27=20Dominiak?= <griwes@griwes.info>
Date: Sat, 16 Feb 2013 01:52:40 +0100
Subject: [PATCH] =?UTF-8?q?I=20don't=20need=20any=2016KiB=20stacks,=20it's?=
 =?UTF-8?q?=20=C2=B5kernel,=20not=20a=20monsterlithic=20one.?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 loader/booter/memory/memory.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/loader/booter/memory/memory.cpp b/loader/booter/memory/memory.cpp
index fe2ed30..f2f8b22 100644
--- a/loader/booter/memory/memory.cpp
+++ b/loader/booter/memory/memory.cpp
@@ -94,13 +94,13 @@ uint64_t memory::install_kernel(uint32_t kernel_base, uint32_t kernel_length)
 void memory::install_kernel_stack(uint64_t & kernel_end)
 {
     memory::default_allocator.align(4096);
-    uint8_t * kernel_stack = new uint8_t[4 * 4096];
+    uint8_t * kernel_stack = new uint8_t[4096];
     
     kernel_end += 4096;
     
-    vas->map(kernel_end, kernel_end + 4 * 4096, (uint64_t)kernel_stack);
+    vas->map(kernel_end, kernel_end + 4096, (uint64_t)kernel_stack);
     
-    kernel_end += 4 * 4096;
+    kernel_end += 4096;
 }
 
 void memory::install_initrd(uint64_t kernel_end, uint32_t initrd_base, uint32_t initrd_length)
