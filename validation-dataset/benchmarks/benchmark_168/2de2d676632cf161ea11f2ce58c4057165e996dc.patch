From 2de2d676632cf161ea11f2ce58c4057165e996dc Mon Sep 17 00:00:00 2001
From: Alex Beregszaszi <alex@rtfs.hu>
Date: Tue, 20 Oct 2020 20:42:52 +0100
Subject: [PATCH] Change reinterpret<> to use bit_cast<>

---
 lib/fizzy/execute.cpp | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/lib/fizzy/execute.cpp b/lib/fizzy/execute.cpp
index c3a5e63af..ee77f9459 100644
--- a/lib/fizzy/execute.cpp
+++ b/lib/fizzy/execute.cpp
@@ -147,11 +147,7 @@ inline void reinterpret(OperandStack& stack) noexcept
 {
     static_assert(std::is_integral_v<SrcT> == std::is_floating_point_v<DstT> ||
                   std::is_floating_point_v<SrcT> == std::is_integral_v<DstT>);
-    static_assert(sizeof(SrcT) == sizeof(DstT));
-    const auto src = stack.top().as<SrcT>();
-    DstT dst;
-    __builtin_memcpy(&dst, &src, sizeof(dst));
-    stack.top() = dst;
+    stack.top() = bit_cast<DstT>(stack.top().as<SrcT>());
 }
 
 template <typename Op>
