From e6cf2e1b60ecd1b5679bfa2cc081a3a3df1598ba Mon Sep 17 00:00:00 2001
From: Chris Maughan <cmaughan@snarlsoftware.com>
Date: Sat, 26 Jan 2019 21:42:10 +0000
Subject: [PATCH] Improve the delay loop while waiting for keyboard

Fix for issue #15 (?)
Instead of sleeping, go back to the old method of having SDL wait for
input for 10ms - this should mean the loop executes as soon as there is
a key press.

The RefreshRequired is only checked if the timeout occurs, to test if
the editor needs to update anything.
---
 demo_imgui/main.cpp | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/demo_imgui/main.cpp b/demo_imgui/main.cpp
index 6d9168fb5..bb5c30e72 100644
--- a/demo_imgui/main.cpp
+++ b/demo_imgui/main.cpp
@@ -270,7 +270,7 @@ int main(int argc, char** argv)
         // - When io.WantCaptureKeyboard is true, do not dispatch keyboard input data to your main application.
         // Generally you may always pass all inputs to dear imgui, and hide them from your application based on those two flags.
         SDL_Event event;
-        if (SDL_WaitEventTimeout(&event, 0))
+        if (SDL_WaitEventTimeout(&event, 10))
         {
             ImGui_ImplSDL2_ProcessEvent(&event);
             if (event.type == SDL_QUIT)
@@ -284,7 +284,6 @@ int main(int argc, char** argv)
             // This will check for cursor flash, for example, to keep that updated.
             if (!zep.spEditor->RefreshRequired())
             {
-                std::this_thread::sleep_for(std::chrono::milliseconds(10));
                 continue;
             }
         }
